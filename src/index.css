@import 'tailwindcss';

/* NUCLEAR CACHE BUST - v3.1.4 - 2025-01-24-23:55 - FORCE REFRESH */

/* === MODERN CSS ANCHOR POSITIONING === */
/* Progressive enhancement - fallback to existing positioning */
@supports (anchor-name: --anchor) {
  
  /* User dropdown with anchor positioning */
  .user-avatar-icon {
    anchor-name: --user-avatar;
  }
  
  .user-popover {
    position: absolute;
    position-anchor: --user-avatar;
    top: anchor(bottom);
    left: anchor(left);
    margin-block-start: var(--space-3xs);
  }
  
  /* Search input with anchor positioning */
  .search-toggle {
    anchor-name: --search-button;
  }
  
  .search-input-container {
    position: absolute;
    position-anchor: --search-button;
    top: anchor(bottom);
    right: anchor(right);
    margin-block-start: var(--space-3xs);
  }
  
  /* Flashcard tooltips for difficulty indicators */
  .flashcard__difficulty-badge {
    anchor-name: --difficulty-badge;
  }
  
  .difficulty-tooltip {
    position: absolute;
    position-anchor: --difficulty-badge;
    bottom: anchor(top);
    left: anchor(center);
    transform: translateX(-50%);
    margin-block-end: var(--space-2xs);
    background: var(--text-1);
    color: var(--text-inverse);
    padding: var(--space-3xs) var(--space-2xs);
    border-radius: var(--space-3xs);
    font-size: var(--step--2);
    white-space: nowrap;
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.2s var(--ease-out-2);
    z-index: 1000;
  }
  
  .flashcard__difficulty-badge:hover + .difficulty-tooltip,
  .flashcard__difficulty-badge:focus + .difficulty-tooltip {
    opacity: 1;
  }
}

/* === FLASHCARD COMPONENT STYLES === */
/* Higher specificity selectors for deployment CSS cascade issues */

/* NUCLEAR OPTION - Maximum specificity for stubborn deployment caching */
article.flashcard.flashcard.flashcard,
.flashcard.flashcard.flashcard.flashcard {
  background: var(--difficulty-bg, var(--surface-raised)) !important;
  border: 2px solid var(--difficulty-border, var(--border-2)) !important;
  border-radius: var(--radius-xl) !important;
  color: var(--difficulty-text, var(--text-1)) !important;
}

/* MAXIMUM SPECIFICITY - Force difficulty backgrounds */
article.flashcard.flashcard.flashcard--easy,
.flashcard.flashcard.flashcard.flashcard--easy {
  --difficulty-bg: var(--surface-raised) !important;
  --difficulty-border: oklch(70% 0.15 150 / 0.3) !important;
  --difficulty-text: var(--text-1) !important;
  background: var(--surface-raised) !important;
  border-color: oklch(70% 0.15 150 / 0.3) !important;
}

article.flashcard.flashcard.flashcard--medium,
.flashcard.flashcard.flashcard.flashcard--medium {
  --difficulty-bg: var(--surface-raised) !important;
  --difficulty-border: oklch(65% 0.18 45 / 0.3) !important;
  --difficulty-text: var(--text-1) !important;
  background: var(--surface-raised) !important;
  border-color: oklch(65% 0.18 45 / 0.3) !important;
}

article.flashcard.flashcard.flashcard--hard,
.flashcard.flashcard.flashcard.flashcard--hard {
  --difficulty-bg: var(--surface-raised) !important;
  --difficulty-border: oklch(60% 0.22 10 / 0.3) !important;
  --difficulty-text: var(--text-1) !important;
  background: var(--surface-raised) !important;
  border-color: oklch(60% 0.22 10 / 0.3) !important;
}

/* Reveal button with higher specificity */
.flashcard .flashcard__action--reveal,
.flashcard__action.flashcard__action--reveal {
  background: linear-gradient(135deg, var(--difficulty-color, var(--brand-primary)), var(--brand-primary-hover));
  border: 2px solid var(--difficulty-border, var(--border-focus));
  color: var(--text-inverse);
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-2xs) var(--space-xs);
  font-weight: 700;
  font-size: var(--step--1);
}

/* === ACCESSIBILITY & SKIP LINKS === */
.skip-link {
  position: absolute;
  top: -40px;
  left: 6px;
  background: var(--primary-500, #2563eb);
  color: white;
  padding: 8px 16px;
  text-decoration: none;
  border-radius: 4px;
  font-weight: 600;
  z-index: 9999;
  transition: top 0.3s ease;
}

.skip-link:focus {
  top: 6px;
  outline: 2px solid white;
  outline-offset: 2px;
}

/* Screen reader only content */
.sr-only {
  position: absolute !important;
  width: 1px !important;
  height: 1px !important;
  padding: 0 !important;
  margin: -1px !important;
  overflow: hidden !important;
  clip: rect(0, 0, 0, 0) !important;
  white-space: nowrap !important;
  border: 0 !important;
}

/* === TEXT WRAP OPTIMIZATION === */

/* === ENHANCED GLOBAL TYPOGRAPHY === */
* {
  text-wrap: pretty;
  /* Ensure consistent font rendering across browsers */
  -webkit-font-smoothing: inherit;
  -moz-osx-font-smoothing: inherit;
  text-rendering: inherit;
}

/* === VIEWPORT & FONT CONSISTENCY FIXES === */
html {
  font-size: 100%;
  /* Prevent font scaling issues in deployment */
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  text-size-adjust: 100%;
  /* Force hardware acceleration for smoother text */
  -webkit-transform: translateZ(0);
  transform: translateZ(0);
  /* Better font rendering foundation */
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* Ensure consistent viewport behavior across environments */
@viewport {
  width: device-width;
  zoom: 1.0;
}

/* Meta viewport enforcement through CSS */
@media screen {
  :root {
    /* Force 1:1 pixel ratio */
    --viewport-scale: 1;
    /* Prevent zoom-related font size changes */
    font-size: calc(1rem * var(--viewport-scale));
  }
}

/* Prevent horizontal overflow on mobile devices */
html, body {
  overflow-x: hidden;
  max-width: 100vw;
}

/* Additional aggressive mobile overflow prevention */
@media (max-width: 768px) {
  * {
    max-width: 100vw;
    box-sizing: border-box;
  }
  
  /* Force breadcrumb container to never exceed viewport */
  .breadcrumb-container {
    max-width: 100vw !important;
    overflow: hidden !important;
  }
}

/* === FANCY TYPOGRAPHY ENHANCEMENTS === */
h1,
h2,
h3,
h4,
h5,
h6,
p,
blockquote,
li,
.flashcard__question,
.flashcard__answer,
.nav-label,
.stat-label,
.study-reminder,
.form-label,
.dashboard-title,
.dashboard-subtitle {
  text-wrap: pretty;
  /* Enhanced text contrast and readability */
  text-shadow: 0 0 1px transparent;
  /* Subtle kerning improvements */
  font-kerning: auto;
  letter-spacing: -0.01em;
}

/* Fancy heading enhancements */
h1, h2, h3, .dashboard-title, .nav-title, .section-title {
  /* Subtle text shadow for depth */
  text-shadow: 0 1px 2px oklch(0% 0 0 / 0.1);
  /* Better optical alignment */
  font-feature-settings: 'liga' 1, 'kern' 1, 'calt' 1, 'case' 1;
  /* Tighter letter spacing for headings */
  letter-spacing: -0.025em;
}

/* Enhanced body text readability */
p, .flashcard__question, .flashcard__answer, .deck-description {
  /* Optimal line height for reading */
  line-height: 1.65;
  /* Subtle text shadows for better contrast */
  text-shadow: 0 0.5px 1px oklch(0% 0 0 / 0.05);
  /* Hanging punctuation for better alignment */
  hanging-punctuation: first last;
}

/* === FONT LOADING & FALLBACK OPTIMIZATION === */
@font-face {
  font-family: 'Inter Fallback';
  src: local('Arial'), local('Helvetica'), local('system-ui');
  font-display: swap;
  size-adjust: 100.06%;
  ascent-override: 90%;
  descent-override: 22%;
  line-gap-override: 0%;
}

/* Ensure smooth font transitions */
.font-loading {
  font-family: 'Inter Fallback', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
  visibility: visible;
}

.font-loaded {
  font-family: 'Inter', 'Inter Fallback', -apple-system, BlinkMacSystemFont, system-ui, sans-serif;
}

/* === FANCY TEXT EFFECTS === */
.gradient-text {
  background: linear-gradient(135deg, var(--brand-primary), var(--accent-sage));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  /* Fallback for browsers that don't support background-clip: text */
  color: var(--brand-primary);
  /* Subtle glow effect */
  filter: drop-shadow(0 0 2px oklch(65% 0.15 240 / 0.3));
}

/* Enhanced button text */
.btn-primary, .btn-secondary {
  /* Subtle text shadow for depth */
  text-shadow: 0 1px 2px oklch(0% 0 0 / 0.2);
  /* Better kerning for buttons */
  font-feature-settings: 'liga' 1, 'kern' 1;
}

/* Prevent text-wrap on elements where it's not needed */
code,
pre,
.nav-icon,
.stat-number,
.flashcard__difficulty,
.flashcard__tag {
  text-wrap: nowrap;
}

/* === ACCESSIBILITY STYLES === */

/* Screen reader only content */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Focus indicators for keyboard navigation */
*:focus {
  outline: 2px solid var(--color-blue-600, #2563eb);
  outline-offset: 2px;
}

/* Custom focus styles for interactive elements */
button:focus,
a:focus,
input:focus,
textarea:focus,
select:focus,
[tabindex]:focus,
.stat-card:focus,
.action-card:focus,
.flashcard:focus {
  outline: 2px solid var(--primary-500, #2563eb);
  outline-offset: 2px;
  box-shadow: 0 0 0 4px oklch(from var(--primary-500, #2563eb) l c h / 0.2);
}

/* Focus styles for badge elements */
.stat-badge:focus,
.action-badge:focus {
  outline: 2px solid var(--text-1);
  outline-offset: 2px;
  box-shadow: 0 0 0 4px oklch(from var(--text-1) l c h / 0.2);
}

/* Keyboard navigation improvements */
.stat-card:focus-visible,
.action-card:focus-visible {
  transform: translateY(-2px);
  box-shadow:
    0 0 0 4px oklch(from var(--primary-500) l c h / 0.2),
    0 8px 25px oklch(from var(--surface-1) l c h / 0.15),
    0 4px 10px oklch(from var(--surface-1) l c h / 0.1);
}

/* Ensure interactive elements are properly focusable */
.stat-card,
.action-card {
  cursor: pointer;
}

.stat-card[role='button'],
.action-card[role='button'] {
  background: transparent;
  border: none;
  font: inherit;
  text-align: inherit;
  padding: 0;
  width: 100%;
}

/* Hide decorative elements from screen readers */
[aria-hidden='true'] {
  pointer-events: none;
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .stat-card:focus-visible,
  .action-card:focus-visible {
    transform: none;
    transition: none;
  }

  .skip-link {
    transition: none;
  }

  /* Disable all animations for users who prefer reduced motion */
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* Focus management for dynamic content */
[role='alert'][aria-live='assertive'] {
  position: relative;
}

/* Ensure proper focus indication for all interactive elements */
button,
input,
select,
textarea,
a,
[tabindex='0'],
[role='button'],
[role='tab'],
[role='menuitem'] {
  position: relative;
}

/* Better focus indication for dark backgrounds */
.stat-badge:focus,
.action-badge:focus {
  background: oklch(from var(--success-500) calc(l + 0.1) c h);
  outline: 2px solid currentColor;
  outline-offset: 2px;
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  button,
  input,
  textarea,
  select {
    border: 2px solid;
  }

  /* Ensure high contrast for interactive elements */
  button {
    background: ButtonFace;
    color: ButtonText;
    border-color: ButtonBorder;
  }

  button:hover,
  button:focus {
    background: Highlight;
    color: HighlightText;
  }

  a:link {
    color: LinkText;
  }
  a:visited {
    color: VisitedText;
  }
  a:active {
    color: ActiveText;
  }

  /* Force high contrast for custom elements */
  .flashcard {
    border: 2px solid;
    background: Canvas;
    color: CanvasText;
  }

  .nav-item.active {
    background: Highlight;
    color: HighlightText;
  }
}

/* Enhanced color contrast for WCAG AA compliance */
.form-error {
  color: oklch(35% 0.15 25); /* High contrast red for errors */
  font-weight: 500;
}

.flashcard__action--correct {
  background-color: oklch(85% 0.12 142); /* High contrast green */
  color: oklch(25% 0.08 142); /* Dark green text */
  border: 1px solid oklch(70% 0.15 142);
}

.flashcard__action--incorrect {
  background-color: oklch(85% 0.12 25); /* High contrast red */
  color: oklch(25% 0.12 25); /* Dark red text */
  border: 1px solid oklch(70% 0.15 25);
}

/* Ensure sufficient contrast for disabled states */
button:disabled,
input:disabled,
textarea:disabled,
select:disabled {
  color: oklch(45% 0.01 240); /* WCAG AA compliant disabled text */
  background-color: oklch(95% 0.005 240);
  border-color: oklch(85% 0.01 240);
  opacity: 1; /* Don't rely on opacity alone */
}

/* Link contrast improvements */
a {
  color: oklch(40% 0.15 240); /* High contrast blue */
}

a:hover,
a:focus {
  color: oklch(30% 0.18 240); /* Darker on hover */
  text-decoration: underline;
}

a:visited {
  color: oklch(35% 0.15 280); /* High contrast purple */
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
}

/* === GLOBAL STYLES === */
html {
  scroll-behavior: smooth;
  overflow-x: hidden;
  height: 100%;
  background: var(--surface-1);
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}

body {
  overflow-x: hidden;
  max-width: 100vw;
  height: 100%;
  background: var(--surface-1);
  background-attachment: fixed;
  min-height: 100vh;
}

* {
  box-sizing: border-box;
}

/* Ensure no element causes horizontal scroll */
*,
*::before,
*::after {
  max-width: 100%;
}

/* Beautiful gradient background for the entire app */
#root {
  background: var(--surface-1);
  min-height: 100vh;
}

.app-container {
  background: var(--surface-1);
  min-height: 100vh;
}

/* === USER DROPDOWN MENU === */
.user-dropdown {
  position: relative;
  display: inline-block;
}

.user-avatar {
  display: flex;
  align-items: center;
  gap: var(--space-2xs);
  padding: var(--space-2xs) var(--space-xs);
  background: var(--surface-2);
  border: 1px solid var(--border-2);
  border-radius: var(--radius-2);
  cursor: pointer;
  transition: all 0.2s ease;
  font-size: var(--step--1);
  color: var(--text-1);
}

.user-avatar:hover {
  background: var(--surface-3);
  border-color: var(--brand-primary);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px oklch(25% 0.03 240 / 0.15);
}

.user-icon {
  font-size: 1.2em;
}

.user-name {
  font-weight: 500;
  max-width: 120px;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* User dropdown with popover API */
.user-dropdown {
  position: relative;
  display: inline-block;
}

.user-avatar-icon {
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 2.5rem;
  height: 2.5rem;
  border-radius: 50%;
  background: var(--surface-1);
  border: 1px solid var(--border-1);
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  text-align: center;
  line-height: 1;
  padding: var(--space-2xs);
  margin: 0;
  box-sizing: border-box;
  position: relative;
}

.user-icon {
  font-size: 1.25rem;
  display: block;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
}

.user-avatar-icon::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--brand-primary);
  opacity: 0;
  border-radius: 50%;
  transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.user-avatar-icon:hover::before {
  opacity: 0.05;
}

.user-avatar-icon:hover {
  border-color: var(--brand-primary);
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
}

.user-avatar-icon:active {
  transform: translateY(0);
  box-shadow: var(--shadow-xs);
}

.user-popover {
  position: absolute;
  top: calc(100% + 0.5rem);
  right: 0;
  width: 200px;
  max-width: calc(100vw - 2rem);
  transform: translateX(calc(-100% + 2.5rem));
  background: var(--surface-1);
  border: 1px solid var(--border-2);
  border-radius: var(--radius-2);
  box-shadow:
    0 8px 32px oklch(25% 0.03 240 / 0.12),
    0 4px 16px oklch(25% 0.03 240 / 0.08);
  z-index: 1000;
  opacity: 0;
  visibility: hidden;
  transition: all 0.2s ease-out;
}

.user-dropdown:hover .user-popover,
.user-popover:hover {
  opacity: 1;
  visibility: visible;
}

@keyframes popoverSlideIn {
  from {
    opacity: 0;
    transform: translateY(-0.5rem);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}


.user-popover .user-info {
  padding: var(--space-xs);
  border-bottom: 1px solid var(--border-1);
}

.user-popover .user-name {
  font-weight: 600;
  color: var(--text-1);
  font-size: var(--step--1);
}

.user-email {
  font-size: var(--step--2);
  color: var(--text-3);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.user-menu-divider {
  border: none;
  height: 1px;
  background: var(--border-1);
  margin: 0;
}

.logout-button {
  width: 100%;
  padding: var(--space-xs);
  background: none;
  border: none;
  text-align: left;
  cursor: pointer;
  color: var(--text-2);
  font-size: var(--step--1);
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  gap: var(--space-2xs);
}

.logout-button:hover {
  background: var(--surface-2);
  color: var(--text-1);
}

/* Language Selector */
.language-selector {
  padding: var(--space-xs);
}

.language-label {
  font-size: var(--step--2);
  font-weight: 500;
  color: var(--text-2);
  margin-bottom: var(--space-2xs);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.language-options {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  gap: var(--space-3xs);
}

.language-option {
  padding: var(--space-3xs) var(--space-2xs);
  background: var(--surface-2);
  border: 1px solid var(--border-1);
  border-radius: var(--radius-1);
  font-size: var(--step--2);
  color: var(--text-2);
  cursor: pointer;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-3xs);
  font-weight: 500;
}

.language-option:hover {
  background: var(--surface-3);
  border-color: var(--border-2);
  color: var(--text-1);
  transform: translateY(-1px);
}

.language-option.active {
  background: var(--brand-primary);
  border-color: var(--brand-primary);
  color: white;
  box-shadow: 0 2px 8px oklch(var(--brand-primary-l) var(--brand-primary-c) var(--brand-primary-h) / 0.3);
}

.language-option.active:hover {
  background: var(--brand-primary);
  border-color: var(--brand-primary);
  color: white;
  transform: translateY(-1px);
}

:root {
  /* === FLUID TYPOGRAPHY === */
  --step--2: clamp(0.69rem, 0.66rem + 0.18vw, 0.8rem);
  --step--1: clamp(0.83rem, 0.78rem + 0.29vw, 1rem);
  --step-0: clamp(1rem, 0.91rem + 0.43vw, 1.25rem);
  --step-1: clamp(1.2rem, 1.07rem + 0.63vw, 1.56rem);
  --step-2: clamp(1.44rem, 1.26rem + 0.89vw, 1.95rem);
  --step-3: clamp(1.73rem, 1.48rem + 1.24vw, 2.44rem);
  --step-4: clamp(2.07rem, 1.73rem + 1.7vw, 3.05rem);

  /* === FLUID SPACING === */
  --space-3xs: clamp(0.25rem, 0.23rem + 0.11vw, 0.31rem);
  --space-2xs: clamp(0.5rem, 0.45rem + 0.22vw, 0.63rem);
  --space-xs: clamp(0.75rem, 0.68rem + 0.33vw, 0.94rem);
  --space-s: clamp(1rem, 0.91rem + 0.43vw, 1.25rem);
  --space-m: clamp(1.5rem, 1.36rem + 0.65vw, 1.88rem);
  --space-l: clamp(2rem, 1.82rem + 0.87vw, 2.5rem);
  --space-xl: clamp(3rem, 2.73rem + 1.3vw, 3.75rem);
  --space-2xl: clamp(4rem, 3.64rem + 1.74vw, 5rem);

  /* === PROFESSIONAL INLINE SPACING === */
  --padding-inline-xs: clamp(0.5rem, 0.45rem + 0.22vw, 0.63rem);
  --padding-inline-s: clamp(0.75rem, 0.68rem + 0.33vw, 0.94rem);
  --padding-inline-m: clamp(1rem, 0.91rem + 0.43vw, 1.25rem);
  --padding-inline-l: clamp(1.5rem, 1.36rem + 0.65vw, 1.88rem);
  --padding-inline-xl: clamp(2rem, 1.82rem + 0.87vw, 2.5rem);

  /* === PROFESSIONAL OKLCH THEMING SYSTEM === */

  /* Beautiful Light Theme Gradients */
  --surface-1: linear-gradient(
    135deg,
    oklch(100% 0 0) 0%,
    oklch(98% 0.008 240) 25%,
    oklch(99% 0.005 260) 50%,
    oklch(97% 0.012 220) 75%,
    oklch(98.5% 0.006 250) 100%
  ); /* Subtle blue-white gradient */

  --surface-2: linear-gradient(
    135deg,
    oklch(98% 0.005 240) 0%,
    oklch(96% 0.012 260) 30%,
    oklch(97% 0.008 220) 70%,
    oklch(95% 0.015 240) 100%
  ); /* Whisper blue-gray gradient */

  --surface-3: oklch(96% 0.01 240); /* Light blue-gray */
  --surface-4: oklch(94% 0.015 240); /* Soft blue-gray */
  --surface-raised: oklch(100% 0 0); /* Elevated elements */
  --surface-overlay: oklch(100% 0 0 / 0.95); /* Modal overlays */

  /* Text hierarchy - Dark to medium grays */
  --text-1: oklch(15% 0.02 240); /* Primary text - deep - WCAG AA compliant */
  --text-2: oklch(35% 0.015 240); /* Secondary text - WCAG AA compliant */
  --text-3: oklch(45% 0.01 240); /* Tertiary text - WCAG AA compliant */
  --text-4: oklch(55% 0.008 240); /* Disabled text - WCAG AA compliant */
  --text-inverse: oklch(98% 0.005 240); /* Text on dark backgrounds */

  /* Brand palette - Blue family */
  --brand-50: oklch(98% 0.01 240); /* Lightest tint */
  --brand-100: oklch(95% 0.03 240);
  --brand-200: oklch(88% 0.06 240);
  --brand-300: oklch(78% 0.09 240);
  --brand-400: oklch(68% 0.12 240);
  --brand-500: oklch(45% 0.15 240); /* Primary brand - WCAG AA compliant */
  --brand-600: oklch(48% 0.17 240); /* Darker primary */
  --brand-700: oklch(38% 0.18 240);
  --brand-800: oklch(28% 0.16 240);
  --brand-900: oklch(18% 0.12 240); /* Darkest */

  /* Accent colors - Sage green family */
  --accent-50: oklch(97% 0.02 165);
  --accent-100: oklch(93% 0.05 165);
  --accent-200: oklch(86% 0.08 165);
  --accent-300: oklch(78% 0.1 165);
  --accent-400: oklch(70% 0.12 165);
  --accent-500: oklch(48% 0.14 165); /* Primary accent - WCAG AA compliant */
  --accent-600: oklch(54% 0.15 165);
  --accent-700: oklch(46% 0.14 165);
  --accent-800: oklch(38% 0.12 165);
  --accent-900: oklch(28% 0.1 165);

  /* Semantic colors - Success, Warning, Error */
  --success-50: oklch(97% 0.02 160);
  --success-100: oklch(93% 0.05 160);
  --success-500: oklch(
    45% 0.15 160
  ); /* Success green - darker for better contrast */
  --success-600: oklch(55% 0.17 160);
  --success-700: oklch(45% 0.18 160);

  --warning-50: oklch(98% 0.02 80);
  --warning-100: oklch(94% 0.05 80);
  --warning-500: oklch(75% 0.12 80); /* Warning yellow */
  --warning-600: oklch(65% 0.14 80);
  --warning-700: oklch(55% 0.15 80);

  --error-50: oklch(98% 0.02 20);
  --error-100: oklch(94% 0.05 20);
  --error-500: oklch(45% 0.18 20); /* Error red - darker for better contrast */
  --error-600: oklch(55% 0.2 20);
  --error-700: oklch(45% 0.2 20);

  /* Border system */
  --border-1: oklch(92% 0.005 240); /* Subtle borders */
  --border-2: oklch(88% 0.01 240); /* Medium borders */
  --border-3: oklch(82% 0.015 240); /* Strong borders */
  --border-focus: oklch(58% 0.15 240); /* Focus rings */
  --border-error: oklch(65% 0.18 20); /* Error borders */
  --border-success: oklch(65% 0.15 160); /* Success borders */

  /* Shadow system with OKLCH */
  --shadow-xs: 0 1px 2px oklch(20% 0.02 240 / 0.05);
  --shadow-sm:
    0 1px 3px oklch(20% 0.02 240 / 0.1), 0 1px 2px oklch(20% 0.02 240 / 0.06);
  --shadow-md:
    0 4px 6px oklch(20% 0.02 240 / 0.07), 0 2px 4px oklch(20% 0.02 240 / 0.06);
  --shadow-lg:
    0 10px 15px oklch(20% 0.02 240 / 0.1), 0 4px 6px oklch(20% 0.02 240 / 0.05);
  --shadow-xl:
    0 20px 25px oklch(20% 0.02 240 / 0.1),
    0 10px 10px oklch(20% 0.02 240 / 0.04);
  --shadow-2xl: 0 25px 50px oklch(20% 0.02 240 / 0.25);
  --shadow-colored: 0 8px 25px oklch(58% 0.15 240 / 0.15);
  --shadow-glow: 0 0 20px oklch(58% 0.15 240 / 0.3);

  /* Gradient system for light mode */
  --gradient-from: var(--surface-1); /* Pure white */
  --gradient-to: oklch(99.5% 0.002 240); /* Whisper blue-white */
  --gradient-accent: oklch(99% 0.005 240); /* Very light blue */

  /* === GLASSMORPHISM SYSTEM === */
  --glass-1: oklch(100% 0 0 / 0.1);                   /* Ultra light glass */
  --glass-2: oklch(100% 0 0 / 0.2);                   /* Light glass */
  --glass-3: oklch(100% 0 0 / 0.3);                   /* Medium glass */
  --glass-4: oklch(100% 0 0 / 0.4);                   /* Strong glass */
  --glass-tint: oklch(98% 0.005 240 / 0.8);           /* Tinted glass */
  --glass-backdrop: oklch(95% 0.01 240 / 0.9);        /* Backdrop glass */
  
  /* Glass blur levels */
  --blur-xs: blur(2px);
  --blur-sm: blur(4px);
  --blur-md: blur(8px);
  --blur-lg: blur(12px);
  --blur-xl: blur(16px);
  --blur-2xl: blur(24px);

  /* === MODERN GRADIENTS === */
  --gradient-glass-1: linear-gradient(135deg, 
    oklch(100% 0 0 / 0.1) 0%, 
    oklch(98% 0.005 240 / 0.2) 100%);
  --gradient-glass-2: linear-gradient(135deg, 
    oklch(100% 0 0 / 0.2) 0%, 
    oklch(96% 0.01 240 / 0.3) 100%);
  --gradient-brand: linear-gradient(135deg, 
    var(--brand-400) 0%, 
    var(--brand-600) 100%);
  --gradient-accent: linear-gradient(135deg, 
    var(--accent-400) 0%, 
    var(--accent-600) 100%);
  --gradient-success: linear-gradient(135deg, 
    var(--success-400) 0%, 
    var(--success-600) 100%);

  /* === ADVANCED MICRO-INTERACTIONS === */
  --ease-in-1: cubic-bezier(0.25, 0, 1, 1);
  --ease-out-1: cubic-bezier(0, 0, 0.75, 1);
  --ease-in-out-1: cubic-bezier(0.25, 0, 0.75, 1);
  --ease-in-2: cubic-bezier(0.5, 0, 1, 1);
  --ease-out-2: cubic-bezier(0, 0, 0.5, 1);
  --ease-in-out-2: cubic-bezier(0.5, 0, 0.5, 1);
  --ease-elastic: cubic-bezier(0.68, -0.55, 0.265, 1.55);
  --ease-bounce: cubic-bezier(0.68, -0.6, 0.32, 1.6);
  
  /* Transition durations */
  --duration-xs: 150ms;
  --duration-sm: 200ms;
  --duration-md: 300ms;
  --duration-lg: 500ms;
  --duration-xl: 700ms;

  /* === THEME ACCENT SYSTEM === */
  --theme-accent: var(--brand-500);
  --theme-accent-hover: var(--brand-600);
  --theme-accent-light: var(--brand-100);
  --theme-accent-dark: var(--brand-700);
  --theme-accent-gradient: var(--gradient-brand);
  --theme-secondary: var(--accent-500);
  --theme-secondary-gradient: var(--gradient-accent);

  /* Legacy aliases for backwards compatibility */
  --brand-primary: var(--brand-500);
  --brand-primary-hover: var(--brand-600);
  --brand-primary-light: var(--brand-50);
  --accent-sage: var(--accent-500);
  --shadow-2: var(--shadow-sm);
  --shadow-3: var(--shadow-md);
}

/* === MANUAL THEME SWITCHING === */
[data-theme='dark'],
.dark-theme {
  /* Beautiful Dark Theme Gradients */
  --surface-1: linear-gradient(
    135deg,
    oklch(15% 0.01 240) 0%,
    oklch(17% 0.015 260) 25%,
    oklch(16% 0.012 220) 50%,
    oklch(18% 0.018 250) 75%,
    oklch(16.5% 0.013 240) 100%
  ); /* Deep blue-dark gradient */

  --surface-2: linear-gradient(
    135deg,
    oklch(18% 0.015 240) 0%,
    oklch(20% 0.02 260) 30%,
    oklch(19% 0.017 220) 70%,
    oklch(21% 0.022 240) 100%
  ); /* Slightly lighter dark gradient */

  --surface-3: oklch(22% 0.02 240); /* Card backgrounds */
  --surface-4: oklch(26% 0.025 240); /* Elevated elements */
  --surface-raised: oklch(20% 0.015 240); /* Modals, dropdowns */
  --surface-overlay: oklch(10% 0.01 240 / 0.9); /* Modal overlays */

  /* Dark mode text - From light to medium */
  --text-1: oklch(95% 0.005 240); /* Primary text - bright */
  --text-2: oklch(75% 0.01 240); /* Secondary text */
  --text-3: oklch(55% 0.015 240); /* Tertiary text */
  --text-4: oklch(40% 0.02 240); /* Disabled text */
  --text-inverse: oklch(15% 0.01 240); /* Text on light backgrounds */

  /* Adjusted brand colors for dark mode */
  --brand-50: oklch(25% 0.05 240);
  --brand-100: oklch(30% 0.08 240);
  --brand-200: oklch(38% 0.1 240);
  --brand-300: oklch(48% 0.12 240);
  --brand-400: oklch(58% 0.14 240);
  --brand-500: oklch(68% 0.15 240); /* Brighter for dark mode */
  --brand-600: oklch(78% 0.13 240);
  --brand-700: oklch(85% 0.1 240);
  --brand-800: oklch(90% 0.08 240);
  --brand-900: oklch(95% 0.05 240);

  /* Dark mode accent colors */
  --accent-50: oklch(25% 0.05 165);
  --accent-100: oklch(30% 0.08 165);
  --accent-200: oklch(38% 0.1 165);
  --accent-300: oklch(48% 0.12 165);
  --accent-400: oklch(58% 0.13 165);
  --accent-500: oklch(68% 0.14 165); /* Brighter sage for dark */
  --accent-600: oklch(78% 0.12 165);
  --accent-700: oklch(85% 0.1 165);
  --accent-800: oklch(90% 0.08 165);
  --accent-900: oklch(95% 0.05 165);

  /* Dark mode semantic colors */
  --success-500: oklch(45% 0.15 160);
  --warning-500: oklch(45% 0.12 80);
  --error-500: oklch(45% 0.18 20);

  /* Dark mode borders */
  --border-1: oklch(30% 0.01 240); /* Subtle dark borders */
  --border-2: oklch(35% 0.015 240); /* Medium borders */
  --border-3: oklch(45% 0.02 240); /* Strong borders */

  /* Dark mode shadows - deeper and more pronounced */
  --shadow-xs: 0 1px 2px oklch(5% 0.01 240 / 0.3);
  --shadow-sm:
    0 1px 3px oklch(5% 0.01 240 / 0.4), 0 1px 2px oklch(5% 0.01 240 / 0.3);
  --shadow-md:
    0 4px 6px oklch(5% 0.01 240 / 0.4), 0 2px 4px oklch(5% 0.01 240 / 0.3);
  --shadow-lg:
    0 10px 15px oklch(5% 0.01 240 / 0.5), 0 4px 6px oklch(5% 0.01 240 / 0.3);
  --shadow-xl:
    0 20px 25px oklch(5% 0.01 240 / 0.5), 0 10px 10px oklch(5% 0.01 240 / 0.2);
  --shadow-2xl: 0 25px 50px oklch(5% 0.01 240 / 0.6);
  --shadow-colored: 0 8px 25px oklch(68% 0.15 240 / 0.3);
  --shadow-glow: 0 0 20px oklch(68% 0.15 240 / 0.4);

  /* Dark mode gradient colors - replace white with dark blue */
  --gradient-from: oklch(12% 0.02 240);           /* Deep dark blue */
  --gradient-to: oklch(16% 0.025 240);            /* Slightly lighter dark blue */
  --gradient-accent: oklch(14% 0.02 220);         /* Purple-tinted dark blue */

  /* === DARK MODE GLASSMORPHISM === */
  --glass-1: oklch(20% 0.01 240 / 0.1);          /* Ultra light dark glass */
  --glass-2: oklch(25% 0.015 240 / 0.2);         /* Light dark glass */
  --glass-3: oklch(30% 0.02 240 / 0.3);          /* Medium dark glass */
  --glass-4: oklch(35% 0.025 240 / 0.4);         /* Strong dark glass */
  --glass-tint: oklch(18% 0.015 240 / 0.8);      /* Tinted dark glass */
  --glass-backdrop: oklch(12% 0.01 240 / 0.9);   /* Backdrop dark glass */

  /* Dark mode glass gradients */
  --gradient-glass-1: linear-gradient(135deg, 
    oklch(20% 0.01 240 / 0.1) 0%, 
    oklch(25% 0.015 240 / 0.2) 100%);
  --gradient-glass-2: linear-gradient(135deg, 
    oklch(25% 0.015 240 / 0.2) 0%, 
    oklch(30% 0.02 240 / 0.3) 100%);
}

/* === AUTO DARK MODE (FALLBACK) === */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme]) {
    /* Beautiful Auto Dark Theme Gradients */
    --surface-1: linear-gradient(
      135deg,
      oklch(15% 0.01 240) 0%,
      oklch(17% 0.015 260) 25%,
      oklch(16% 0.012 220) 50%,
      oklch(18% 0.018 250) 75%,
      oklch(16.5% 0.013 240) 100%
    ); /* Deep blue-dark gradient */

    --surface-2: linear-gradient(
      135deg,
      oklch(18% 0.015 240) 0%,
      oklch(20% 0.02 260) 30%,
      oklch(19% 0.017 220) 70%,
      oklch(21% 0.022 240) 100%
    ); /* Slightly lighter dark gradient */

    --surface-3: oklch(22% 0.02 240); /* Card backgrounds */
    --surface-4: oklch(26% 0.025 240); /* Elevated elements */
    --surface-raised: oklch(20% 0.015 240); /* Modals, dropdowns */
    --surface-overlay: oklch(10% 0.01 240 / 0.9); /* Modal overlays */

    /* Dark mode text - From light to medium - WCAG AA compliant */
    --text-1: oklch(95% 0.005 240); /* Primary text - bright - PASSES AA */
    --text-2: oklch(80% 0.01 240); /* Secondary text - WCAG AA compliant */
    --text-3: oklch(65% 0.015 240); /* Tertiary text - WCAG AA compliant */
    --text-4: oklch(50% 0.02 240); /* Disabled text - WCAG AA compliant */
    --text-inverse: oklch(15% 0.01 240); /* Text on light backgrounds */

    /* Adjusted brand colors for dark mode */
    --brand-50: oklch(25% 0.05 240);
    --brand-100: oklch(30% 0.08 240);
    --brand-200: oklch(38% 0.1 240);
    --brand-300: oklch(48% 0.12 240);
    --brand-400: oklch(58% 0.14 240);
    --brand-500: oklch(68% 0.15 240); /* Brighter for dark mode */
    --brand-600: oklch(78% 0.13 240);
    --brand-700: oklch(85% 0.1 240);
    --brand-800: oklch(90% 0.08 240);
    --brand-900: oklch(95% 0.05 240);

    /* Dark mode accent colors */
    --accent-50: oklch(25% 0.05 165);
    --accent-100: oklch(30% 0.08 165);
    --accent-200: oklch(38% 0.1 165);
    --accent-300: oklch(48% 0.12 165);
    --accent-400: oklch(58% 0.13 165);
    --accent-500: oklch(68% 0.14 165); /* Brighter sage for dark */
    --accent-600: oklch(78% 0.12 165);
    --accent-700: oklch(85% 0.1 165);
    --accent-800: oklch(90% 0.08 165);
    --accent-900: oklch(95% 0.05 165);

    /* Dark mode semantic colors */
    --success-500: oklch(45% 0.15 160);
    --warning-500: oklch(45% 0.12 80);
    --error-500: oklch(45% 0.18 20);

    /* Dark mode borders */
    --border-1: oklch(30% 0.01 240); /* Subtle dark borders */
    --border-2: oklch(35% 0.015 240); /* Medium borders */
    --border-3: oklch(45% 0.02 240); /* Strong borders */

    /* Dark mode shadows - deeper and more pronounced */
    --shadow-xs: 0 1px 2px oklch(5% 0.01 240 / 0.3);
    --shadow-sm:
      0 1px 3px oklch(5% 0.01 240 / 0.4), 0 1px 2px oklch(5% 0.01 240 / 0.3);
    --shadow-md:
      0 4px 6px oklch(5% 0.01 240 / 0.4), 0 2px 4px oklch(5% 0.01 240 / 0.3);
    --shadow-lg:
      0 10px 15px oklch(5% 0.01 240 / 0.5), 0 4px 6px oklch(5% 0.01 240 / 0.3);
    --shadow-xl:
      0 20px 25px oklch(5% 0.01 240 / 0.5), 0 10px 10px oklch(5% 0.01 240 / 0.2);
    --shadow-2xl: 0 25px 50px oklch(5% 0.01 240 / 0.6);
    --shadow-colored: 0 8px 25px oklch(68% 0.15 240 / 0.3);
    --shadow-glow: 0 0 20px oklch(68% 0.15 240 / 0.4);

    /* Dark mode gradient colors - replace white with dark blue */
    --gradient-from: oklch(12% 0.02 240); /* Deep dark blue */
    --gradient-to: oklch(16% 0.025 240); /* Slightly lighter dark blue */
    --gradient-accent: oklch(14% 0.02 220); /* Purple-tinted dark blue */
  }

  /* Dark mode navigation transparency - only apply to dark mode */
  :root:not([data-theme]) .navigation {
    background: oklch(12% 0.02 240 / 0.75) !important;
    /* Multiple backdrop-filter declarations for maximum compatibility */
    backdrop-filter: blur(20px) !important;
    -webkit-backdrop-filter: blur(20px) !important;
    -moz-backdrop-filter: blur(20px) !important;
    -ms-backdrop-filter: blur(20px) !important;
    -o-backdrop-filter: blur(20px) !important;
    /* Ensure the blur is always applied */
    backdrop-filter: blur(20px) saturate(180%) !important;
    border-bottom: 1px solid oklch(40% 0.02 240 / 0.3) !important;
    box-shadow: 0 4px 24px oklch(10% 0.03 240 / 0.2) !important;
  }

  @media (max-width: 1024px) {
    :root:not([data-theme]) .navigation {
      background: oklch(12% 0.02 240 / 0.75) !important;
      backdrop-filter: blur(16px);
      -webkit-backdrop-filter: blur(16px);
      box-shadow: 0 4px 32px oklch(10% 0.03 240 / 0.25) !important;
    }
  }
}

/* === EXPLICIT DARK THEME NAVIGATION === */
[data-theme='dark'] .navigation,
.dark-theme .navigation {
  background: linear-gradient(135deg, 
    oklch(18% 0.08 240 / 0.85) 0%,
    oklch(15% 0.06 250 / 0.9) 50%,
    oklch(12% 0.04 220 / 0.88) 100%) !important;
  backdrop-filter: blur(20px) saturate(150%) !important;
  -webkit-backdrop-filter: blur(20px) saturate(150%) !important;
  -moz-backdrop-filter: blur(20px) saturate(150%) !important;
  border-bottom: 1px solid oklch(35% 0.08 240 / 0.4) !important;
  box-shadow: 
    0 4px 32px oklch(8% 0.15 240 / 0.6),
    0 1px 0 oklch(25% 0.05 240 / 0.3) inset !important;
}

/* Light mode navigation transparency - explicit light mode */
.light-theme .navigation,
:root:not(.dark-theme):not([data-theme='dark']) .navigation {
  background: oklch(98% 0.008 240 / 0.85) !important;
  /* Multiple backdrop-filter declarations for maximum compatibility */
  backdrop-filter: blur(16px) !important;
  -webkit-backdrop-filter: blur(16px) !important;
  -moz-backdrop-filter: blur(16px) !important;
  -ms-backdrop-filter: blur(16px) !important;
  -o-backdrop-filter: blur(16px) !important;
  /* Ensure the blur is always applied */
  backdrop-filter: blur(16px) saturate(180%) !important;
  border-bottom: 1px solid oklch(70% 0.02 240 / 0.3) !important;
  box-shadow: 0 4px 20px oklch(25% 0.03 240 / 0.05) !important;
}

@media (max-width: 1024px) {
  /* Dark theme mobile navigation */
  [data-theme='dark'] .navigation,
  .dark-theme .navigation {
    background: linear-gradient(135deg, 
      oklch(16% 0.06 240 / 0.9) 0%,
      oklch(13% 0.05 250 / 0.92) 50%,
      oklch(10% 0.03 220 / 0.9) 100%) !important;
    backdrop-filter: blur(16px) saturate(140%);
    -webkit-backdrop-filter: blur(16px) saturate(140%);
    border-bottom: 1px solid oklch(30% 0.06 240 / 0.5) !important;
    box-shadow: 
      0 4px 32px oklch(6% 0.12 240 / 0.7),
      0 1px 0 oklch(22% 0.04 240 / 0.25) inset !important;
  }

  /* Light theme mobile navigation */
  .light-theme .navigation,
  :root:not(.dark-theme):not([data-theme='dark']) .navigation {
    background: oklch(98% 0.008 240 / 0.85) !important;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-bottom: 1px solid oklch(70% 0.02 240 / 0.25) !important;
    box-shadow: 0 4px 28px oklch(25% 0.03 240 / 0.1) !important;
  }
}

:root {
  --radius-2: 0.5rem;
  --radius-3: 0.75rem;
  --radius-4: 1rem;
  --radius-xl: 1.5rem;
  --radius-2xl: 2rem;
  --radius-pill: 9999px;

  --ease-out-2: cubic-bezier(0, 0, 0.2, 1);

  /* === BEAUTIFUL ANIMATIONS === */
  --animation-fade-in: fade-in 0.6s var(--ease-out-2);
  --animation-slide-from-left: slide-from-left 0.8s var(--ease-out-2);
  --animation-slide-from-bottom: slide-from-bottom 0.7s var(--ease-out-2);
  --animation-scale-up: scale-up 0.5s var(--ease-out-2);

  /* === ENHANCED TYPOGRAPHY SYSTEM === */
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen-Sans, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
  line-height: 1.6;
  font-weight: 400;
  font-feature-settings: 'liga' 1, 'kern' 1, 'calt' 1;
  font-variant-ligatures: common-ligatures contextual;
  font-kerning: auto;
  font-optical-sizing: auto;

  color-scheme: light dark;
  color: var(--text-1);
  background-color: var(--surface-1);

  /* === ENHANCED FONT RENDERING === */
  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  text-size-adjust: 100%;
  
  /* Better subpixel rendering for crisp text */
  -webkit-font-feature-settings: 'liga', 'kern';
  -moz-font-feature-settings: 'liga', 'kern';
  font-feature-settings: 'liga', 'kern';
  
  /* Improve text contrast on Retina displays */
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

/* OKLCH color definitions */
:root {
  --oklch-900: oklch(20% 0.05 270);
  --oklch-850: oklch(30% 0.08 260);
  --oklch-800: oklch(41% 0.16928 333.204);
  --oklch-white: oklch(100% 0.05 270);
  --oklch-black: oklch(0% 0.05 270);
  --oklch-gray: oklch(50% 0.05 270);
  --oklch-rebecca: oklch(50% 0.1 270);
  --oklch-red: oklch(50% 0.1 0);
  --oklch-green: oklch(50% 0.1 120);
  --oklch-blue: oklch(50% 0.1 240);
  --oklch-yellow: oklch(50% 0.1 60);
  --oklch-cyan: oklch(50% 0.1 180);
  --oklch-magenta: oklch(50% 0.1 300);
  --oklch-orange: oklch(50% 0.1 30);
  --oklch-purple: oklch(50% 0.1 270);
  --oklch-pink: oklch(50% 0.1 330);
  --oklch-brown: oklch(50% 0.1 30);
  --oklch-teal: oklch(50% 0.1 150);
  --oklch-lime: oklch(50% 0.1 90);
  --oklch-olive: oklch(50% 0.1 60);
  --oklch-gold: oklch(50% 0.1 45);
  --oklch-silver: oklch(50% 0.1 240);
  --oklch-copper: oklch(55.405% 0.07917 62.276);
  --oklch-bronze: oklch(50% 0.1 30);
}

a {
  font-weight: 500;
  color: var(--oklch-900);
  text-decoration: inherit;
}
a:hover {
  color: var(--oklch-850);
}

body {
  margin: 0;
  min-width: 320px;
  min-height: 100vh;
}

#root {
  width: 100%;
}

h1 {
  font-size: 3.2em;
  line-height: 1.1;
}

button {
  border-radius: 8px;
  border: 1px solid transparent;
  padding: 0.6em 1.2em;
  font-size: 1em;
  font-weight: 500;
  font-family: inherit;
  background-color: var(--oklch-800);
  cursor: pointer;
  transition: border-color 0.25s;
}
button:hover {
  border-color: var(--oklch-900);
}
button:focus,
button:focus-visible {
  outline: 4px auto -webkit-focus-ring-color;
}

@media (prefers-color-scheme: light) {
  :root {
    color: var(--oklch-900);
    background-color: var(--oklch-white);
  }
  a:hover {
    color: var(--oklch-900);
  }
  button {
    background-color: var(--oklch-800);
  }
}

/* === KEYFRAMES === */
@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

@keyframes slide-from-left {
  from {
    transform: translateX(-100%);
  }
  to {
    transform: translateX(0);
  }
}

@keyframes slide-from-bottom {
  from {
    transform: translateY(100%);
  }
  to {
    transform: translateY(0);
  }
}

@keyframes scale-up {
  from {
    transform: scale(0.9);
    opacity: 0;
  }
  to {
    transform: scale(1);
    opacity: 1;
  }
}

/* === FLASH CARDS COMPONENTS === */
.app-container {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  height: 100vh;
  overflow-y: auto;
}

.navigation {
  display: flex;
  flex-direction: column;
  gap: var(--space-2xs);
  padding: var(--space-2xs) var(--space-s);
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(20px) saturate(180%);
  -webkit-backdrop-filter: blur(20px) saturate(180%);
  border-bottom: 1px solid oklch(70% 0.02 240 / 0.3);
  position: sticky;
  top: 0;
  z-index: 1003;
  transition: all 0.3s var(--ease-out-2);
  box-shadow: 0 4px 20px oklch(25% 0.03 240 / 0.05);
}

/* Mobile-first navigation using modern CSS */
@media (max-width: 1024px) {
  body {
    overflow-x: hidden;
  }

  .navigation {
    display: flex;
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    gap: 1rem;
    padding: 1rem;
    width: 100%;
    max-width: 100vw;
    box-sizing: border-box;
    background: transparent;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-bottom: 1px solid oklch(70% 0.02 240 / 0.25);
    box-shadow: 0 4px 28px oklch(25% 0.03 240 / 0.1);
  }

  .nav-brand {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    min-width: 0;
    flex: 1;
  }

  .mobile-hamburger {
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
  }
}

@media (min-width: 1025px) {
  .navigation {
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
    padding: var(--space-s) var(--space-l);
  }
}

.nav-brand {
  display: flex;
  align-items: center;
  gap: var(--space-2xs);
}

.brand-link {
  display: flex;
  align-items: center;
  gap: var(--space-2xs);
  text-decoration: none;
  color: inherit;
  transition: all 0.2s var(--ease-out-2);
}

.brand-link:hover {
  transform: scale(1.05);
}

.nav-logo {
  width: 3.5rem;
  height: 3.5rem;
  padding: var(--space-2xs);
  border-radius: var(--radius-3);
  background: linear-gradient(135deg, var(--brand-primary), var(--accent-sage));
  display: flex;
  align-items: center;
  justify-content: center;
  color: white;
  font-weight: 700;
  font-size: var(--step--1);
}

.nav-title {
  font-size: var(--step-1);
  font-weight: 700;
  color: var(--text-1);
  background: linear-gradient(135deg, var(--brand-primary), var(--accent-sage));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.nav-items {
  display: flex;
  flex-wrap: nowrap;
  gap: clamp(0.25rem, 1vw, 0.5rem);
  justify-content: center;
  overflow-x: auto;
  scrollbar-width: none;
  -ms-overflow-style: none;
}

.nav-items::-webkit-scrollbar {
  display: none;
}

/* Hide desktop nav on mobile/tablet */
@media (max-width: 1024px) {
  .desktop-nav {
    display: none;
  }

  /* Mobile menu should be the only UI on small screens */
  .nav-items,
  .nav-user,
  .desktop-theme-toggle,
  .user-dropdown,
  .user-avatar-icon {
    display: none;
  }
}

/* Show desktop nav only on larger screens */
@media (min-width: 1025px) {
  .mobile-hamburger {
    display: none;
  }
}

/* Mobile hamburger container */
.mobile-hamburger {
  display: none;
  position: relative;
  z-index: 1002;
  border-radius: var(--radius-2);
}

@media (max-width: 1024px) {
  .mobile-hamburger {
    display: flex;
    align-items: center;
    justify-content: center;
  }
}

/* Style the hamburger-react component */
.mobile-hamburger button {
  border-radius: var(--radius-2) !important;
  transition: all 0.2s var(--ease-out-2);
}

.mobile-hamburger button:focus-visible {
  background: linear-gradient(
    135deg,
    oklch(from var(--brand-primary) l c h / 0.1),
    oklch(from var(--accent-sage) l c h / 0.1)
  ) !important;
  box-shadow:
    0 0 0 2px var(--surface-1),
    0 2px 8px oklch(25% 0.03 240 / 0.15);
  transform: scale(1.05);
}

.mobile-hamburger button:focus-visible::before {
  content: '';
  position: absolute;
  inset: -4px;
  background: linear-gradient(135deg, var(--brand-primary), var(--accent-sage));
  border-radius: calc(var(--radius-2) + 4px);
  opacity: 0.4;
  z-index: -1;
}

/* Mobile Menu Overlay & Slide-out */
.mobile-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: oklch(0% 0 0 / 0.5);
  z-index: 1000;
  animation: fadeIn 0.3s ease;
}

.mobile-menu {
  position: fixed;
  top: 79px;
  right: 0;
  width: min(320px, 85vw);
  height: calc(100vh - 79px);
  background: var(--surface-1);
  border-left: 1px solid var(--border-1);
  box-shadow: -8px 0 32px oklch(25% 0.03 240 / 0.15);
  z-index: 1001;
  display: flex;
  flex-direction: column;
  animation: slideInRight 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes slideInRight {
  from {
    transform: translateX(100%);
  }
  to {
    transform: translateX(0);
  }
}

.mobile-menu-items {
  flex: 1;
  padding: 0 0 var(--space-l) 0;
  display: flex;
  flex-direction: column;
  gap: var(--space-3xs);
}

.mobile-menu-item {
  display: flex;
  align-items: center;
  gap: var(--space-s);
  padding: var(--space-s) var(--space-l);
  color: var(--text-1);
  text-decoration: none;
  font-weight: 500;
  transition: all 0.2s ease;
  border-left: 3px solid transparent;
}

.mobile-menu-item:hover {
  background: var(--surface-2);
  border-left-color: var(--brand-primary);
}

.mobile-menu-item.active {
  background: var(--brand-50);
  color: var(--brand-primary);
  border-left-color: var(--brand-primary);
}

.mobile-menu-footer {
  padding: var(--space-l);
  border-top: 1px solid var(--border-1);
  background: var(--surface-2);
}

.mobile-user-section {
  display: flex;
  flex-direction: column;
  gap: var(--space-s);
}

.mobile-user-info {
  display: flex;
  align-items: center;
  gap: var(--space-s);
  padding: var(--space-s);
  background: var(--surface-1);
  border-radius: var(--radius-2);
  border: 1px solid var(--border-1);
}

.user-avatar-mobile {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 2.5rem;
  height: 2.5rem;
  background: var(--brand-50);
  border-radius: 50%;
  color: var(--brand-primary);
  flex-shrink: 0;
}

.user-details {
  flex: 1;
  min-width: 0;
}

.user-details .user-name {
  font-weight: 600;
  color: var(--text-1);
  font-size: var(--step--1);
  margin-bottom: 0.25rem;
}

.user-details .user-email {
  font-size: var(--step--2);
  color: var(--text-2);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.mobile-actions {
  display: flex;
  flex-direction: column;
  gap: var(--space-s);
  padding-top: var(--space-s);
  border-top: 1px solid var(--border-1);
}

.mobile-logout {
  width: 100%;
  padding: var(--space-s);
  text-align: center;
  border-radius: var(--radius-2);
  background: var(--surface-1);
  border: 1px solid var(--border-1);
  transition: all 0.2s ease;
}

.mobile-logout:hover {
  background: var(--surface-2);
  border-color: var(--brand-primary);
}

@media (min-width: 768px) {
  .nav-items {
    justify-content: flex-end;
    gap: var(--space-2xs);
  }
}

.nav-item {
  display: flex;
  align-items: center;
  gap: clamp(0.125rem, 0.5vw, 0.25rem);
  padding: clamp(0.25rem, 1vw, 0.5rem) clamp(0.375rem, 1.5vw, 0.75rem);
  border-radius: var(--radius-2);
  text-decoration: none;
  color: var(--text-2);
  font-weight: 500;
  font-size: clamp(0.75rem, 2vw, 0.875rem);
  transition: all 0.2s var(--ease-out-2);
  position: relative;
  min-width: fit-content;
  text-wrap: pretty;
  text-align: center;
}

.nav-item::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--brand-primary);
  border-radius: inherit;
  opacity: 0;
  transition: opacity 0.2s var(--ease-out-2);
  z-index: -1;
}

.nav-item:hover::before {
  opacity: 0.05;
}

.nav-item:hover {
  color: var(--text-1);
  transform: translateY(-1px);
}

.nav-item.active {
  color: var(--brand-primary);
  background: var(--brand-primary-light);
}

.nav-user {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  margin-top: var(--space-2xs);
  position: relative;
}

@media (min-width: 768px) {
  .nav-user {
    margin-top: 0;
  }
}

.main-content {
  flex: 1;
  padding: var(--space-xl) var(--space-s) var(--space-s);
  background: transparent;
  min-height: 0;
}

@media (min-width: 768px) {
  .main-content {
    padding: var(--space-2xl) var(--space-l) var(--space-l);
  }
}

.dashboard-container {
  max-width: 100vw;
  margin: 0 auto;
  padding: 0 clamp(0.5rem, 2vw, 1rem);
  box-sizing: border-box;
  display: grid;
  gap: var(--space-xl);
  grid-template-areas:
    'header'
    'stats'
    'actions'
    'activity';
}

@media (min-width: 1025px) {
  .dashboard-container {
    max-width: 1400px;
    padding: 0;
  }
}

.dashboard-header {
  grid-area: header;
  text-align: center;
  animation: var(--animation-fade-in);
}

.dashboard-title {
  font-size: var(--step-2);
  font-weight: 700;
  color: var(--text-1);
  margin-bottom: var(--space-2xs);
  line-height: 1.1;
  animation: var(--animation-slide-from-left);
  animation-delay: 0.2s;
  animation-fill-mode: both;
  text-align: center;
  text-wrap: balance;
  hyphens: auto;
}

@media (min-width: 768px) {
  .dashboard-title {
    font-size: var(--step-3);
  }
}

@media (min-width: 1024px) {
  .dashboard-title {
    font-size: var(--step-4);
  }
}

.dashboard-subtitle {
  font-size: var(--step--1);
  color: var(--text-2);
  max-width: 90vw;
  margin: 0 auto;
  text-align: center;
  animation: var(--animation-fade-in);
  animation-delay: 0.4s;
  animation-fill-mode: both;
}

@media (min-width: 768px) {
  .dashboard-subtitle {
    font-size: var(--step-0);
    max-width: 60ch;
  }
}

.gradient-text {
  background: linear-gradient(135deg, var(--brand-primary), var(--accent-sage));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.stats-grid {
  grid-area: stats;
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--space-s);
}

@media (min-width: 640px) {
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (min-width: 1024px) {
  .stats-grid {
    grid-template-columns: repeat(4, 1fr);
    gap: var(--space-l);
  }
}

.stat-card {
  background: var(--surface-1);
  padding: var(--space-s);
  border-radius: var(--radius-3);
  border: 1px solid var(--border-1);
  display: flex;
  align-items: center;
  gap: var(--space-2xs);
  transition: all 0.3s var(--ease-out-2);
  animation: var(--animation-scale-up);
  animation-delay: calc(var(--index, 0) * 0.1s + 0.6s);
  animation-fill-mode: both;
  position: relative;
  overflow: hidden;
}

@media (min-width: 768px) {
  .stat-card {
    padding: var(--space-l);
    border-radius: var(--radius-xl);
    gap: var(--space-s);
  }
}

.stat-card::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--brand-primary);
  opacity: 0;
  transition: opacity 0.3s var(--ease-out-2);
}

.stat-card:hover::before {
  opacity: 0.02;
}

.stat-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-3);
  border-color: var(--brand-primary);
}

.stat-card:nth-child(1) {
  --index: 1;
}
.stat-card:nth-child(2) {
  --index: 2;
}
.stat-card:nth-child(3) {
  --index: 3;
}
.stat-card:nth-child(4) {
  --index: 4;
}

.stat-icon {
  font-size: var(--step-3);
  background: var(--surface-3);
  width: 4rem;
  height: 4rem;
  border-radius: var(--radius-3);
  display: flex;
  align-items: center;
  justify-content: center;
}

.stat-content {
  flex: 1;
}

.stat-number {
  font-size: var(--step-3);
  font-weight: 700;
  color: var(--text-1);
  margin-bottom: var(--space-3xs);
  line-height: 1;
}

.stat-label {
  color: var(--text-2);
  font-size: var(--step--1);
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  text-wrap: pretty;
  text-align: center;
}

.quick-actions {
  grid-area: actions;
}

.section-title {
  font-size: var(--step-2);
  font-weight: 600;
  color: var(--text-1);
  margin-bottom: var(--space-l);
  position: relative;
  padding-left: var(--space-s);
}

.section-title::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  bottom: 0;
  width: 4px;
  background: linear-gradient(135deg, var(--brand-primary), var(--accent-sage));
  border-radius: var(--radius-pill);
}

.actions-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--space-s);
}

@media (min-width: 768px) {
  .actions-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (min-width: 1024px) {
  .actions-grid {
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-l);
  }
}

.action-card {
  background: var(--surface-1);
  padding: var(--space-l);
  border-radius: var(--radius-xl);
  border: 1px solid var(--border-1);
  text-decoration: none;
  color: inherit;
  transition: all 0.3s var(--ease-out-2);
  display: block;
  position: relative;
  overflow: hidden;
  animation: var(--animation-slide-from-bottom);
  animation-delay: calc(var(--index, 0) * 0.1s + 0.6s);
  animation-fill-mode: both;
}

.action-card::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--brand-primary);
  opacity: 0;
  transition: opacity 0.3s var(--ease-out-2);
}

.action-card:hover::before {
  opacity: 0.02;
}

.action-card:hover {
  transform: translateY(-3px);
  box-shadow: var(--shadow-3);
  border-color: var(--brand-primary);
}

.action-card:nth-child(1) {
  --index: 1;
}
.action-card:nth-child(2) {
  --index: 2;
}
.action-card:nth-child(3) {
  --index: 3;
}

.action-icon {
  font-size: var(--step-4);
  margin-bottom: var(--space-s);
  display: block;
}

.action-title {
  font-size: var(--step-1);
  font-weight: 600;
  color: var(--text-1);
  margin-bottom: var(--space-2xs);
  line-height: 1.3;
}

.action-description {
  color: var(--text-2);
  line-height: 1.5;
  font-size: var(--step--1);
}

.recent-activity {
  grid-area: activity;
  background: var(--surface-1);
  padding: var(--space-xl);
  border-radius: var(--radius-xl);
  border: 1px solid var(--border-1);
}

/* Mobile optimization for recent activity */
@media (max-width: 768px) {
  .recent-activity {
    padding: var(--space-s);
    margin: 0;
  }
}

.deck-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--space-s);
  align-items: stretch;
  justify-items: center;
}

/* Mobile optimization for deck grid */
@media (max-width: 768px) {
  .deck-grid {
    gap: var(--space-xs);
    padding: 0;
  }
}

@media (min-width: 768px) {
  .deck-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (min-width: 1200px) {
  .deck-grid {
    grid-template-columns: repeat(auto-fill, minmax(380px, 1fr));
    gap: var(--space-l);
  }
}

/* Better desktop layout for deck stats */
@media (min-width: 768px) {
  .deck-stats {
    gap: var(--space-m);
  }

  .deck-stat {
    font-size: var(--step--1);
  }
}

.deck-card {
  /* === GLASSMORPHISM DESIGN === */
  background: var(--gradient-glass-1);
  backdrop-filter: var(--blur-md);
  -webkit-backdrop-filter: var(--blur-md);
  border: 1px solid var(--glass-2);
  border-radius: var(--radius-xl);
  padding: var(--space-l);
  position: relative;
  width: 100%;
  max-width: 100%;
  overflow: hidden;
  
  /* === SMOOTH MICRO-INTERACTIONS === */
  transition: all var(--duration-md) var(--ease-out-2);
  animation: var(--animation-scale-up);
  animation-delay: calc(var(--index, 0) * 0.1s + 0.6s);
  animation-fill-mode: both;
  
  /* === MODERN SHADOWS === */
  box-shadow: 
    var(--shadow-lg),
    0 0 0 1px var(--glass-1) inset;
  /* CSS Subgrid for perfect internal alignment */
  display: grid;
  grid-template-rows: subgrid;
  grid-row: span 4;
  grid-template-areas:
    'header'
    'description'
    'spacer'
    'actions';

  /* Modern layered shadows */
  box-shadow:
    0 1px 0 oklch(100% 0 0 / 0.8) inset,
    0 -1px 0 oklch(88% 0.01 240 / 0.1) inset,
    0 2px 4px oklch(25% 0.03 240 / 0.04),
    0 4px 12px oklch(25% 0.03 240 / 0.06),
    0 8px 24px oklch(25% 0.03 240 / 0.04);
}

/* Mobile optimization for deck cards */
@media (max-width: 768px) {
  .deck-card {
    padding: var(--space-s);
    margin: 0 auto;
    max-width: calc(100vw - 2rem);
    box-sizing: border-box;
  }

  /* Stack deck stats vertically on mobile */
  .deck-stats {
    flex-direction: column;
    gap: var(--space-xs);
    padding: var(--space-xs);
  }

  .deck-stat {
    justify-content: flex-start;
    font-size: var(--step--2);
  }

  /* Reduce padding for enhanced deck cards on mobile */
  .deck-card--enhanced {
    padding: var(--space-m);
    gap: var(--space-s);
  }
}

/* Extra small mobile screens */
@media (max-width: 480px) {
  .deck-card {
    padding: var(--space-xs);
    max-width: calc(100vw - 1rem);
  }

  .deck-card--enhanced {
    padding: var(--space-s);
    gap: var(--space-xs);
  }

  .deck-stats {
    padding: var(--space-2xs);
  }

  .deck-stat {
    font-size: var(--step--3);
  }

  /* Make deck actions stack better on very small screens */
  .deck-actions {
    gap: var(--space-xs);
  }

  .deck-actions .btn-primary,
  .deck-actions .btn-secondary {
    font-size: var(--step--2);
    padding: var(--space-xs) var(--space-s);
  }

  /* Wrap deck meta on very small screens */
  .deck-meta {
    flex-wrap: wrap;
    gap: var(--space-2xs);
    font-size: var(--step--3);
  }

  .deck-category {
    flex-basis: 100%;
    margin-top: var(--space-2xs);
  }
}

.deck-card::before {
  content: '';
  position: absolute;
  inset: 0;
  background:
    radial-gradient(circle at 50% 0%, var(--brand-primary) 0%, transparent 50%),
    linear-gradient(135deg, var(--brand-primary) 0%, var(--accent-sage) 100%);
  opacity: 0;
  transition: opacity 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.deck-card:hover::before {
  opacity: 0.05;
}

.deck-card:hover {
  /* === MODERN 3D HOVER EFFECT === */
  transform: translateY(-8px) scale(1.02);
  background: var(--gradient-glass-2);
  border-color: var(--glass-3);
  backdrop-filter: var(--blur-lg);
  -webkit-backdrop-filter: var(--blur-lg);
  
  /* === ENHANCED SHADOWS === */
  box-shadow:
    var(--shadow-xl),
    var(--shadow-glow),
    0 0 0 1px var(--glass-2) inset;
}

.deck-card:nth-child(1) {
  --index: 1;
}
.deck-card:nth-child(2) {
  --index: 2;
}
.deck-card:nth-child(3) {
  --index: 3;
}
.deck-card:nth-child(4) {
  --index: 4;
}

.deck-header {
  grid-area: header;
  display: flex;
  justify-content: space-between;
  align-items: start;
  gap: var(--space-2xs);
}

.deck-title {
  font-size: var(--step-1);
  font-weight: 700;
  color: var(--text-1);
  margin: 0;
  line-height: 1.2;
  flex: 1;
  transition: color 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  letter-spacing: -0.01em;
}

.deck-card:hover .deck-title {
  background: linear-gradient(135deg, var(--brand-primary), var(--accent-sage));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.deck-count {
  background: linear-gradient(
    135deg,
    var(--surface-2) 0%,
    var(--gradient-accent) 100%
  );
  color: var(--text-1);
  padding: var(--space-3xs) var(--space-xs);
  border-radius: var(--radius-pill);
  font-size: var(--step--2);
  font-weight: 600;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  flex-shrink: 0;
  border: 1px solid var(--border-1);
  box-shadow:
    0 1px 0 oklch(100% 0 0 / 0.8) inset,
    0 1px 3px oklch(25% 0.03 240 / 0.08);
  letter-spacing: 0.02em;
}

.deck-card:hover .deck-count {
  background: linear-gradient(
    135deg,
    var(--brand-primary) 0%,
    var(--brand-primary-hover) 100%
  );
  color: white;
  transform: scale(1.05);
  box-shadow:
    0 1px 0 oklch(75% 0.2 240) inset,
    0 2px 6px oklch(25% 0.03 240 / 0.12),
    0 0 0 1px var(--brand-primary) / 0.2;
  border-color: var(--brand-primary);
}

.deck-description {
  grid-area: description;
  color: var(--text-2);
  line-height: 1.5;
  font-size: var(--step--1);
}

/* Auto-expanding spacer for perfect button alignment */
.deck-spacer {
  grid-area: spacer;
  min-height: var(--space-2xs);
}

.deck-actions {
  grid-area: actions;
  display: flex;
  gap: var(--space-2xs);
  margin-top: auto;
}

/* === JHEY TOMPKINS STYLE BUTTONS === */
.btn-primary {
  --btn-bg: var(--brand-primary);
  --btn-color: white;
  --btn-border: oklch(45% 0.2 240);
  --btn-shadow: oklch(35% 0.15 240);
  --btn-highlight: oklch(75% 0.2 240);

  background: linear-gradient(
    145deg,
    var(--btn-highlight) 0%,
    var(--btn-bg) 50%,
    var(--btn-border) 100%
  );
  color: var(--btn-color);
  border: 2px solid var(--btn-border);
  padding: var(--space-2xs) var(--space-s);
  border-radius: var(--radius-3);
  font-weight: 700;
  font-size: var(--step--1);
  text-decoration: none;
  text-shadow: 0 1px 2px oklch(0% 0 0 / 0.3);
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-3xs);
  cursor: pointer;
  position: relative;
  white-space: nowrap;

  /* Jhey's signature multi-layer shadows */
  box-shadow:
    0 1px 0 var(--btn-highlight) inset,
    0 -1px 0 var(--btn-border) inset,
    0 2px 4px var(--btn-shadow) / 0.2,
    0 4px 8px var(--btn-shadow) / 0.1,
    0 8px 16px var(--btn-shadow) / 0.05;

  transition: all var(--duration-sm) var(--ease-out-2);
  transform-style: preserve-3d;
  backdrop-filter: var(--blur-xs);
  -webkit-backdrop-filter: var(--blur-xs);
}

.btn-primary::before {
  content: '';
  position: absolute;
  inset: 2px;
  background: linear-gradient(
    145deg,
    oklch(80% 0.25 240) 0%,
    oklch(40% 0.18 240) 100%
  );
  border-radius: calc(var(--radius-3) - 2px);
  opacity: 0;
  transition: opacity 0.2s ease;
  z-index: -1;
}

.btn-primary::after {
  content: '';
  position: absolute;
  inset: 0;
  background: radial-gradient(
    ellipse at top,
    oklch(100% 0 0 / 0.3) 0%,
    transparent 70%
  );
  border-radius: var(--radius-3);
  opacity: 0;
  transition: opacity 0.2s ease;
  pointer-events: none;
}

.btn-primary:hover {
  transform: translateY(-1px) rotateX(5deg);
  box-shadow:
    0 1px 0 var(--btn-highlight) inset,
    0 -1px 0 var(--btn-border) inset,
    0 4px 8px var(--btn-shadow) / 0.3,
    0 8px 16px var(--btn-shadow) / 0.2,
    0 16px 32px var(--btn-shadow) / 0.1;
}

.btn-primary:hover::before {
  opacity: 1;
}

.btn-primary:hover::after {
  opacity: 1;
}

.btn-primary:active {
  transform: translateY(0) rotateX(0deg) scale(0.98);
  box-shadow:
    0 1px 0 var(--btn-highlight) inset,
    0 -1px 0 var(--btn-border) inset,
    0 1px 2px var(--btn-shadow) / 0.2;
}

.btn-secondary {
  --btn-bg: var(--surface-1);
  --btn-color: var(--text-1);
  --btn-border: var(--border-1);
  --btn-shadow: oklch(25% 0.03 240);
  --btn-highlight: oklch(100% 0 0);

  background: linear-gradient(
    145deg,
    var(--btn-highlight) 0%,
    var(--btn-bg) 50%,
    oklch(92% 0.01 240) 100%
  );
  color: var(--btn-color);
  border: 1px solid var(--btn-border);
  padding: var(--space-2xs) var(--space-s);
  border-radius: var(--radius-3);
  font-weight: 700;
  font-size: var(--step--1);
  text-decoration: none;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-3xs);
  cursor: pointer;
  position: relative;
  white-space: nowrap;

  /* Multi-layer depth */
  box-shadow:
    0 1px 0 var(--btn-highlight) inset,
    0 -1px 0 oklch(88% 0.005 240) inset,
    0 2px 4px var(--btn-shadow) / 0.1,
    0 4px 8px var(--btn-shadow) / 0.05,
    0 0 0 1px oklch(85% 0.01 240);

  transition: all var(--duration-sm) var(--ease-out-2);
  transform-style: preserve-3d;
  backdrop-filter: var(--blur-xs);
  -webkit-backdrop-filter: var(--blur-xs);
}

.btn-secondary::before {
  content: '';
  position: absolute;
  inset: -2px;
  background: conic-gradient(
    from 45deg,
    var(--brand-primary),
    var(--accent-sage),
    var(--brand-primary)
  );
  border-radius: calc(var(--radius-3) + 2px);
  opacity: 0;
  transition: opacity 0.25s ease;
  z-index: -1;
  animation: gentle-glow 2s ease-in-out infinite;
  animation-play-state: paused;
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

@keyframes gentle-glow {
  0%,
  100% {
    opacity: 0.3;
  }
  50% {
    opacity: 0.7;
  }
}

.btn-secondary::after {
  content: '';
  position: absolute;
  inset: 1px;
  background: var(--btn-bg);
  border-radius: var(--radius-3);
  z-index: -1;
}

.btn-secondary:hover {
  color: var(--brand-primary);
  border-color: var(--brand-primary);
  transform: translateY(-1px) rotateX(5deg);
  box-shadow:
    0 1px 0 var(--btn-highlight) inset,
    0 -1px 0 var(--brand-primary) / 0.3 inset,
    0 4px 8px var(--btn-shadow) / 0.15,
    0 8px 16px var(--btn-shadow) / 0.1,
    0 0 0 2px var(--brand-primary) / 0.2;
}

.btn-secondary:hover::before {
  opacity: 0.5;
  animation-play-state: running;
}

.btn-secondary:active {
  transform: translateY(0) rotateX(0deg) scale(0.98);
  box-shadow:
    0 1px 0 var(--btn-highlight) inset,
    0 -1px 0 var(--brand-primary) / 0.2 inset,
    0 1px 2px var(--btn-shadow) / 0.1;
}

.deck-actions {
  flex-direction: column;
}

@media (min-width: 640px) {
  .deck-actions {
    flex-direction: row;
  }
}

.deck-actions .btn-primary,
.deck-actions .btn-secondary,
.deck-actions .btn-danger {
  flex: 1;
  text-align: center;
  padding: var(--space-2xs) var(--space-xs);
  font-size: var(--step--2);
  font-weight: 500;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.deck-actions .btn-danger {
  padding: var(--space-2xs) !important;
  width: auto;
  height: auto;
  min-width: unset;
  aspect-ratio: unset;
  font-size: var(--step--2) !important;
  justify-content: center;
  align-items: center;
  min-height: auto !important;
  text-align: center;
  border-radius: var(--radius-3) !important;

  /* Subtle styling - just border, no background */
  background: transparent !important;
  color: var(--text-3) !important;
  border: 1px solid var(--border-2) !important;
  transition: all 0.2s var(--ease-out-2);
}

.deck-actions .btn-danger:hover {
  background: var(--surface-2) !important;
  color: var(--error-500) !important;
  border-color: var(--error-500) !important;
  transform: translateY(-1px);
}

@media (min-width: 768px) {
  .deck-actions .btn-primary,
  .deck-actions .btn-secondary {
    font-size: var(--step--1);
    white-space: nowrap;
  }
}

/* === JHEY TOMPKINS SIGNATURE FLASHCARD COMPONENT === */
.flashcard {
  /* === ENHANCED 3D CARD SYSTEM === */
  --card-width: 350px;
  --card-height: 520px;
  --card-perspective: 1200px;
  --flip-duration: 0.6s;
  --hover-lift: -12px;
  --glow-opacity: 0;
  --glass-opacity: 0.1;

  position: relative;
  width: var(--card-width);
  height: var(--card-height);
  perspective: var(--card-perspective);
  cursor: pointer;
  margin: 0 auto;
  
  /* === SMOOTH MODERN TRANSITIONS === */
  transition: all var(--duration-md) var(--ease-out-2);
  transform-style: preserve-3d;
}

.flashcard:hover {
  /* === ENHANCED 3D HOVER === */
  transform: translateY(var(--hover-lift)) rotateX(3deg) rotateY(4deg) scale(1.02);
  --glow-opacity: 0.8;
  --glass-opacity: 0.2;
  
  /* Add subtle rotation animation */
  animation: cardFloat 2s ease-in-out infinite alternate;
}

.flashcard:active {
  transform: translateY(-4px) scale(0.98) rotateX(5deg);
  transition: all var(--duration-xs) var(--ease-bounce);
}

/* === FLOATING ANIMATION === */
@keyframes cardFloat {
  0% { transform: translateY(var(--hover-lift)) rotateX(3deg) rotateY(4deg) scale(1.02); }
  100% { transform: translateY(calc(var(--hover-lift) - 4px)) rotateX(2deg) rotateY(5deg) scale(1.02); }
}

/* Size Variants */
.flashcard--small {
  --card-width: 280px;
  --card-height: 420px;
}

.flashcard--large {
  --card-width: 420px;
  --card-height: 620px;
}

/* === UNIFORM FLASHCARD COLORS FOR LIGHT/DARK MODE === */
.flashcard--easy {
  --difficulty-color: oklch(70% 0.15 150);
  --difficulty-glow: oklch(70% 0.25 150);
  --difficulty-bg: var(--surface-1, oklch(100% 0 0));
  --difficulty-border: oklch(70% 0.15 150 / 0.3);
  --difficulty-text: var(--text-1, oklch(15% 0.02 240));
}

.flashcard--medium {
  --difficulty-color: oklch(65% 0.18 45);
  --difficulty-glow: oklch(65% 0.28 45);
  --difficulty-bg: var(--surface-1, oklch(100% 0 0));
  --difficulty-border: oklch(65% 0.18 45 / 0.3);
  --difficulty-text: var(--text-1, oklch(15% 0.02 240));
}

.flashcard--hard {
  --difficulty-color: oklch(60% 0.22 10);
  --difficulty-glow: oklch(60% 0.32 10);
  --difficulty-bg: var(--surface-1, oklch(100% 0 0));
  --difficulty-border: oklch(60% 0.22 10 / 0.3);
  --difficulty-text: var(--text-1, oklch(15% 0.02 240));
}

/* === ENHANCED 3D FLIP CONTAINER === */
.flashcard__inner {
  position: relative;
  width: 100%;
  height: 100%;
  text-align: center;
  transition: transform var(--flip-duration) var(--ease-out-2);
  transform-style: preserve-3d;
  border-radius: var(--radius-xl);
  
  /* === GLASSMORPHISM ENHANCEMENT === */
  backdrop-filter: var(--blur-sm);
  -webkit-backdrop-filter: var(--blur-sm);
}

.flashcard--flipped .flashcard__inner {
  transform: rotateY(180deg);
}

.flashcard--revealing .flashcard__inner {
  transform: rotateY(180deg);
}

.flashcard--transitioning .flashcard__inner {
  transform: rotateY(180deg);
}

/* Hide content during card transitions */
.flashcard--transitioning .flashcard__front .flashcard__content,
.flashcard--transitioning .flashcard__front .flashcard__question,
.flashcard--transitioning .flashcard__tags,
.flashcard--transitioning .flashcard__category {
  opacity: 0;
  transition: opacity 0.2s ease-out;
}

/* === GLASSMORPHISM CARD SIDES === */
.flashcard__front,
.flashcard__back {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  border-radius: var(--radius-xl);
  padding: var(--space-l) var(--space-l) var(--space-xl) var(--space-l);
  display: flex;
  flex-direction: column;
  gap: var(--space-s);

  /* === MODERN GLASSMORPHISM === */
  background: var(--gradient-glass-1);
  backdrop-filter: var(--blur-md);
  -webkit-backdrop-filter: var(--blur-md);
  border: 1px solid var(--glass-2);
  
  /* === ENHANCED SHADOWS === */
  box-shadow:
    var(--shadow-lg),
    var(--shadow-colored),
    0 0 0 1px var(--glass-1) inset,
    0 0 0 2px var(--difficulty-color) / 0.1;
  overflow: hidden;
}

/* Remove individual card side borders - main card provides unified border */

.flashcard__front {
  transform: rotateY(0deg);
}

.flashcard__back {
  transform: rotateY(180deg);
}

/* Both sides have identical content visibility */
.flashcard__front .flashcard__content,
.flashcard__back .flashcard__content {
  opacity: 1;
  transition: opacity 0.15s ease-in-out;
}

/* Front→Back flip: fade content at the right time */
.flashcard--flipped .flashcard__front .flashcard__content,
.flashcard--revealing .flashcard__front .flashcard__content {
  opacity: 0;
  transition-delay: 0.35s; /* Hide front content when card is edge-on */
}

.flashcard--flipped .flashcard__back,
.flashcard--revealing .flashcard__back {
  transform: rotateY(0deg) scaleX(-1);
  opacity: 1;
  pointer-events: auto;
}

/* Hide front side when flipped */
.flashcard--flipped .flashcard__front,
.flashcard--revealing .flashcard__front {
  opacity: 0;
  pointer-events: none;
}

.flashcard--flipped .flashcard__back .flashcard__content,
.flashcard--revealing .flashcard__back .flashcard__content {
  opacity: 1;
  transition-delay: 0.45s; /* Show back content when flip is mostly complete */
}

/* Back→Front flip: smooth content transition */
.flashcard:not(.flashcard--flipped):not(.flashcard--revealing)
  .flashcard__back
  .flashcard__content {
  opacity: 0;
  transition-delay: 0.35s; /* Hide back content when card is edge-on */
}

.flashcard:not(.flashcard--flipped):not(.flashcard--revealing)
  .flashcard__front
  .flashcard__content {
  opacity: 1;
  transition-delay: 0.45s; /* Show front content when flip is mostly complete */
}

/* Fix layout issues caused by scaleX(-1) */
.flashcard--flipped .flashcard__back,
.flashcard--revealing .flashcard__back {
  display: flex;
  flex-direction: column;
  justify-content: space-between;
}

.flashcard--flipped .flashcard__back .flashcard__content,
.flashcard--revealing .flashcard__back .flashcard__content {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  word-wrap: break-word;
  overflow-wrap: break-word;
  max-width: 100%;
  padding: var(--space-s) 0;
}

.flashcard--flipped .flashcard__back .flashcard__answer,
.flashcard--revealing .flashcard__back .flashcard__answer {
  font-size: var(--step-0);
  line-height: 1.4;
  text-align: center;
  max-width: 100%;
}

.flashcard--flipped .flashcard__back .flashcard__actions,
.flashcard--revealing .flashcard__back .flashcard__actions {
  margin-top: auto;
  display: flex;
  gap: var(--space-xs);
  justify-content: center;
  flex-shrink: 0;
}

/* Clean back side text - more specific selectors instead of !important */
.flashcard.flashcard--flipped .flashcard__back .flashcard__answer,
.flashcard.flashcard--revealing .flashcard__back .flashcard__answer {
  opacity: 1;
  visibility: visible;
  display: block;
  color: var(--difficulty-text);
  font-weight: 600;
}

/* Ensure back side answer is always visible regardless of state */
.flashcard--flipped .flashcard__back .flashcard__answer,
.flashcard--revealing .flashcard__back .flashcard__answer,
.flashcard--transitioning .flashcard__back .flashcard__answer,
.flashcard--hovered .flashcard__back .flashcard__answer {
  opacity: 1 !important;
  visibility: visible !important;
  display: block !important;
  /* Force hardware acceleration and proper rendering */
  transform: translateZ(0);
  will-change: auto;
  background: var(--gradient-glass-1);
  backdrop-filter: var(--blur-md);
  -webkit-backdrop-filter: var(--blur-md);
  border: 1px solid var(--glass-2);
}

/* Header with floating difficulty badge */
.flashcard__header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: var(--space-2xs);
  margin-bottom: var(--space-xs);
}

.flashcard__difficulty {
  position: relative;
  background: var(--difficulty-color);
  color: white;
  padding: var(--space-3xs) var(--space-2xs);
  border-radius: var(--radius-pill);
  font-size: var(--step--2);
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  text-shadow: 0 1px 2px oklch(0% 0 0 / 0.3);

  /* Jhey's floating effect */
  box-shadow:
    0 2px 4px var(--difficulty-color) / 0.3,
    0 4px 12px var(--difficulty-color) / 0.2,
    0 1px 0 oklch(100% 0 0 / 0.3) inset;

  animation: floatBadge 3s ease-in-out infinite;
}

@keyframes floatBadge {
  0%,
  100% {
    transform: translateY(0) rotate(0deg);
  }
  50% {
    transform: translateY(-2px) rotate(1deg);
  }
}

.flashcard__category {
  color: var(--text-2);
  font-size: var(--step--2);
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: 0.1em;
  opacity: 0.8;
}

/* Content areas with proper typography */
.flashcard__content {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  padding: var(--space-s) 0;
}

.flashcard__question,
.flashcard__answer {
  font-size: var(--step-1);
  font-weight: 500;
  line-height: 1.4;
  color: var(--difficulty-text);
  max-width: 100%;
  word-wrap: break-word;
  text-wrap: pretty;
  hyphens: auto;
  overflow-wrap: break-word;
  text-align: center;
  /* Better text balance for flashcard content */
  text-wrap: balance;
}

/* Back side answer hidden by default */
.flashcard .flashcard__back .flashcard__answer {
  font-weight: 600;
  color: var(--difficulty-text);
  opacity: 0;
  display: none;
  font-size: var(--step-1);
  line-height: 1.4;
}

/* Ensure back side answer visibility in specific states - more specific selectors */
.flashcard.flashcard--flipped .flashcard__back .flashcard__answer,
.flashcard.flashcard--revealing .flashcard__back .flashcard__answer,
.flashcard.flashcard--transitioning .flashcard__back .flashcard__answer,
.flashcard.flashcard--hovered .flashcard__back .flashcard__answer {
  opacity: 1;
  visibility: visible;
  display: block;
  color: var(--difficulty-text);
  font-weight: 600;
  /* Force hardware acceleration and proper rendering */
  transform: translateZ(0);
  will-change: auto;
}

/* Footer with cleaner vertical layout */
.flashcard__footer {
  display: flex;
  flex-direction: column;
  gap: var(--space-s);
  margin-top: auto;
  width: 100%;
}

.flashcard__meta {
  display: flex;
  flex-direction: column;
  gap: var(--space-2xs);
  align-items: center;
  text-align: center;
}

/* Removed - now using flashcard__action--reveal */

.flashcard__tags {
  display: flex;
  gap: var(--space-3xs);
  flex-wrap: wrap;
}

.flashcard__tag {
  background: var(--surface-3);
  color: var(--text-2);
  padding: var(--space-3xs) var(--space-2xs);
  border-radius: var(--radius-2);
  font-size: var(--step--2);
  font-weight: 500;
  transition: all 0.2s var(--ease-out-2);
}

.flashcard__tag:hover {
  background: var(--difficulty-color) / 0.1;
  color: var(--difficulty-color);
}

/* Removed - now using flashcard__action--reveal for consistency */

.flashcard__flip-icon {
  animation: blink 2s ease-in-out infinite;
}

@keyframes blink {
  0%,
  90%,
  100% {
    opacity: 1;
  }
  95% {
    opacity: 0.3;
  }
}

/* Answer action buttons with magical effects */
.flashcard__actions {
  display: flex;
  gap: var(--space-2xs);
  margin-top: var(--space-s);
  margin-bottom: var(--space-s);
  padding-bottom: var(--space-2xs);
}

.flashcard__action {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-3xs);
  padding: var(--space-2xs) var(--space-xs);
  border-radius: var(--radius-3);
  font-weight: 700;
  font-size: var(--step--1);
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
  transform-style: preserve-3d;
}

.flashcard__action--correct {
  background: linear-gradient(135deg, oklch(75% 0.15 160), oklch(70% 0.18 160));
  border: 2px solid oklch(65% 0.2 160);
  color: white;
  text-shadow: 0 1px 2px oklch(0% 0 0 / 0.3);
}

.flashcard__action--incorrect {
  background: linear-gradient(135deg, oklch(70% 0.2 0), oklch(65% 0.22 0));
  border: 2px solid oklch(60% 0.24 0);
  color: white;
  text-shadow: 0 1px 2px oklch(0% 0 0 / 0.3);
}

.flashcard__action--reveal {
  background: linear-gradient(135deg, var(--difficulty-color), oklch(60% 0.18 240));
  border: 2px solid var(--difficulty-border);
  color: white;
  text-shadow: 0 1px 2px oklch(0% 0 0 / 0.3);
  width: 100%;
}

.flashcard__action:hover {
  transform: translateY(-2px) rotateX(5deg);
}

.flashcard__action:active {
  transform: translateY(0) scale(0.95);
}

/* Jhey's signature sparkle magic */
.flashcard__sparkles {
  position: absolute;
  inset: 0;
  pointer-events: none;
  border-radius: var(--radius-xl);
  overflow: hidden;
  opacity: 0;
  transition: opacity 0.3s ease;
}

.flashcard:hover .flashcard__sparkles {
  opacity: 1;
}

.flashcard__sparkle {
  position: absolute;
  font-size: var(--step--1);
  animation: sparkle 2s ease-in-out infinite;
}

.flashcard__sparkle--1 {
  top: 10%;
  left: 15%;
  animation-delay: 0s;
}

.flashcard__sparkle--2 {
  top: 20%;
  right: 20%;
  animation-delay: 0.5s;
}

.flashcard__sparkle--3 {
  bottom: 25%;
  left: 10%;
  animation-delay: 1s;
}

.flashcard__sparkle--4 {
  bottom: 15%;
  right: 15%;
  animation-delay: 1.5s;
}

@keyframes sparkle {
  0%,
  100% {
    opacity: 0;
    transform: scale(0) rotate(0deg);
  }
  50% {
    opacity: 1;
    transform: scale(1) rotate(180deg);
  }
}

/* Magical glow effect */
.flashcard__glow {
  position: absolute;
  inset: -4px;
  background: conic-gradient(
    from 0deg,
    var(--difficulty-glow) / 0.3,
    transparent 30%,
    transparent 70%,
    var(--difficulty-glow) / 0.3
  );
  border-radius: calc(var(--radius-xl) + 4px);
  opacity: var(--glow-opacity);
  animation: rotateGlow 3s linear infinite;
  transition: opacity 0.3s ease;
  z-index: -1;
  filter: blur(8px);
}

@keyframes rotateGlow {
  to {
    transform: rotate(360deg);
  }
}

/* Mobile responsive design */
@media (max-width: 768px) {
  .flashcard {
    --card-width: min(320px, 90vw);
    --card-height: min(480px, 70vh);
    margin: 0 auto;
  }

  .flashcard__front,
  .flashcard__back {
    padding: var(--space-s);
  }
}

@media (max-width: 480px) {
  .flashcard {
    --card-width: min(280px, 85vw);
    --card-height: min(420px, 65vh);
  }

  .flashcard__front,
  .flashcard__back {
    padding: var(--space-xs) var(--space-s);
  }

  .flashcard__question,
  .flashcard__answer {
    font-size: var(--step-0);
  }

  .flashcard__actions {
    flex-direction: column;
    margin-bottom: var(--space-s);
    padding-bottom: var(--space-xs);
  }
}

/* Accessibility improvements */
@media (prefers-reduced-motion: reduce) {
  .flashcard,
  .flashcard__inner,
  .flashcard__sparkle,
  .flashcard__glow,
  .flashcard__difficulty {
    animation: none !important;
    transition-duration: 0.1s !important;
  }

  .flashcard:hover {
    transform: none;
  }
}

/* High contrast mode support - keep unified appearance */
@media (prefers-contrast: high) {
  .flashcard {
    border-width: 3px;
  }
}

/* === ACCESSIBILITY-COMPLIANT CARD VISIBILITY === */

/* Hidden sides - focus management only, content stays visible for animation */
.flashcard__front--hidden button,
.flashcard__back--hidden button {
  /* Ensure buttons are not focusable when hidden */
  pointer-events: none;
  opacity: 0;
}

/* Visible sides - ensure proper focus management */
.flashcard__front:not(.flashcard__front--hidden) button,
.flashcard__back:not(.flashcard__back--hidden) button {
  pointer-events: auto;
  opacity: 1;
}

/* === STUDY INTERFACE STYLING === */
.study-container {
  min-height: 100vh;
  display: grid;
  grid-template-rows: auto 1fr auto;
  grid-template-areas:
    'header'
    'main'
    'footer';
  background: var(--surface-2);
  padding: var(--space-s);
}

@media (min-width: 768px) {
  .study-container {
    padding: var(--space-l);
  }
}

.study-header {
  grid-area: header;
  display: flex;
  flex-direction: column;
  gap: var(--space-s);
  margin-bottom: var(--space-l);
  padding: var(--space-s);
  background: var(--surface-1);
  border-radius: var(--radius-3);
  border: 1px solid var(--border-1);
}

@media (min-width: 768px) {
  .study-header {
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-l);
  }
}

.study-navigation {
  display: flex;
  align-items: center;
  gap: var(--space-s);
}

.study-back-btn {
  display: flex;
  align-items: center;
  padding: var(--space-2xs) var(--space-xs);
  background: var(--surface-3);
  color: var(--text-2);
  text-decoration: none;
  border-radius: var(--radius-2);
  font-weight: 500;
  font-size: var(--step--1);
  transition: all 0.2s var(--ease-out-2);
}

.study-back-btn:hover {
  background: var(--brand-primary);
  color: white;
  transform: translateX(-2px);
}

.study-title {
  font-size: var(--step-1);
  font-weight: 700;
  color: var(--text-1);
  margin: 0;
}

@media (min-width: 768px) {
  .study-title {
    font-size: var(--step-2);
  }
}

.study-progress {
  background: var(--brand-primary);
  color: white;
  padding: var(--space-3xs) var(--space-2xs);
  border-radius: var(--radius-pill);
  font-size: var(--step--2);
  font-weight: 700;
  text-shadow: 0 1px 2px oklch(0% 0 0 / 0.3);
  box-shadow: 0 2px 4px var(--brand-primary) / 0.3;
}

.study-score {
  display: flex;
  gap: var(--space-2xs);
}

.score-item {
  display: flex;
  align-items: center;
  gap: var(--space-3xs);
  padding: var(--space-2xs) var(--space-xs);
  border-radius: var(--radius-2);
  font-weight: 600;
  font-size: var(--step--1);
}

.score-item--correct {
  background: oklch(98% 0.03 160);
  color: oklch(65% 0.2 160);
  border: 1px solid oklch(75% 0.15 160) / 0.3;
}

.score-item--incorrect {
  background: oklch(98% 0.03 0);
  color: oklch(65% 0.22 0);
  border: 1px solid oklch(70% 0.2 0) / 0.3;
}

.study-main {
  grid-area: main;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-l) 0;
  min-height: 0;
}

.study-footer {
  grid-area: footer;
  display: flex;
  flex-direction: column;
  gap: var(--space-s);
  align-items: center;
  margin-top: var(--space-l);
}

.study-controls {
  display: flex;
  gap: var(--space-s);
}

.study-control-btn {
  display: flex;
  align-items: center;
  padding: var(--space-2xs) var(--space-s);
  background: var(--surface-1);
  border: 2px solid var(--border-1);
  border-radius: var(--radius-3);
  color: var(--text-1);
  font-weight: 600;
  font-size: var(--step--1);
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);

  box-shadow:
    0 1px 0 oklch(100% 0 0 / 0.5) inset,
    0 2px 4px oklch(25% 0.03 240 / 0.1);
}

.study-control-btn:hover:not(:disabled) {
  background: var(--brand-primary);
  border-color: var(--brand-primary);
  color: white;
  transform: translateY(-1px);
  box-shadow:
    0 1px 0 oklch(100% 0 0 / 0.3) inset,
    0 4px 8px var(--brand-primary) / 0.2;
}

.study-control-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.study-hint {
  text-align: center;
  color: var(--text-2);
  font-size: var(--step--1);
  font-style: italic;
  opacity: 0.8;
}

/* Mobile optimizations for study interface */
@media (max-width: 640px) {
  .study-navigation {
    justify-content: space-between;
    width: 100%;
  }

  .study-title {
    font-size: var(--step-0);
    flex: 1;
    text-align: center;
  }

  .study-controls {
    flex-direction: column;
    width: 100%;
    max-width: 280px;
  }

  .study-control-btn {
    justify-content: center;
  }
}

/* === INTELLIGENT STUDY SESSION COMPONENT === */
.study-session {
  min-height: 100vh;
  display: grid;
  grid-template-rows: auto 1fr auto;
  grid-template-areas:
    'header'
    'main'
    'controls';
  background: var(--surface-2);
  padding: var(--space-s);
  max-width: 100vw;
  overflow-x: hidden;
}

@media (min-width: 768px) {
  .study-session {
    padding: var(--space-l);
  }
}

.study-session-header {
  grid-area: header;
  display: flex;
  flex-direction: column;
  gap: var(--space-s);
  padding: var(--space-s);
  background: var(--surface-1);
  border-radius: var(--radius-3);
  border: 1px solid var(--border-1);
  margin-bottom: var(--space-l);
  max-width: 100%;
  overflow: hidden;
}

@media (min-width: 768px) {
  .study-session-header {
    flex-direction: row;
    justify-content: space-between;
    align-items: center;
    padding: var(--space-l);
  }
}

.session-progress {
  flex: 1;
  width: 100%;
}

@media (min-width: 768px) {
  .session-progress {
    max-width: 300px;
  }
}

.progress-bar {
  width: 100%;
  height: 8px;
  background: var(--surface-3);
  border-radius: var(--radius-pill);
  overflow: hidden;
  margin-bottom: var(--space-2xs);
  position: relative;
}

.progress-fill {
  height: 100%;
  background: linear-gradient(90deg, var(--brand-primary), var(--accent-sage));
  border-radius: var(--radius-pill);
  transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
}

.progress-fill::after {
  content: '';
  position: absolute;
  top: 0;
  right: 0;
  width: 20px;
  height: 100%;
  background: linear-gradient(90deg, transparent, oklch(100% 0 0 / 0.3));
  animation: progressShine 2s ease-in-out infinite;
}

@keyframes progressShine {
  0%,
  100% {
    opacity: 0;
  }
  50% {
    opacity: 1;
  }
}

.progress-text {
  text-align: center;
  font-size: var(--step--2);
  font-weight: 600;
  color: var(--text-2);
}

.session-stats {
  display: flex;
  gap: var(--space-2xs);
  width: 100%;
  justify-content: space-between;
}

.session-stats .stat {
  flex: 1;
  text-align: center;
  min-width: 0;
}

@media (min-width: 480px) {
  .session-stats {
    gap: var(--space-s);
  }
}

@media (min-width: 768px) {
  .session-stats {
    justify-content: flex-end;
    width: auto;
  }

  .session-stats .stat {
    flex: 0 0 auto;
    text-align: left;
  }
}

.stat {
  display: flex;
  align-items: center;
  gap: var(--space-3xs);
  padding: var(--space-3xs) var(--space-2xs);
  background: var(--surface-3);
  border-radius: var(--radius-2);
  font-weight: 600;
  font-size: var(--step--1);
  white-space: nowrap;
  flex: 0 0 auto;
}

@media (min-width: 480px) {
  .stat {
    padding: var(--space-2xs) var(--space-xs);
  }
}

.stat-icon {
  font-size: var(--step-0);
}

.stat-value {
  color: var(--text-1);
}

.study-session-main {
  grid-area: main;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-l) 0;
  max-width: 100%;
  overflow: hidden;
  gap: var(--space-m);
}

.card-counter {
  font-size: var(--step-0);
  font-weight: 600;
  color: var(--text-2);
  text-align: center;
  padding: var(--space-xs) var(--space-s);
  background: var(--surface-1);
  border: 1px solid var(--border-1);
  border-radius: var(--radius-pill);
  box-shadow: 0 2px 4px var(--shadow-1);
}

/* Mobile adjustments for study session */
@media (max-width: 768px) {
  .study-session-main {
    padding: var(--space-s) var(--space-xs);
    gap: var(--space-s);
  }

  .card-counter {
    font-size: var(--step--1);
    padding: var(--space-2xs) var(--space-xs);
  }
}

@media (max-width: 480px) {
  .study-session-main {
    padding: var(--space-xs);
    gap: var(--space-xs);
  }
}

.study-session-controls {
  grid-area: controls;
  display: flex;
  gap: var(--space-s);
  justify-content: center;
  margin: var(--space-s) 0;
  padding: var(--space-s);
  max-width: 100%;
  overflow-x: auto;
}

@media (max-width: 640px) {
  .study-session-controls {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: auto auto;
    gap: var(--space-s);
    align-items: center;
    overflow-x: visible;
  }

  /* Special layout for session control buttons on mobile */
  .session-control-btn--wide {
    grid-column: 1 / -1;
    width: 100%;
  }
}

.session-control-btn {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-2xs) var(--space-s);
  border-radius: var(--radius-3);
  font-weight: 600;
  font-size: var(--step--1);
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  border: 2px solid transparent;
  min-width: 120px;
}

.session-control-btn--primary {
  background: linear-gradient(
    135deg,
    var(--brand-primary),
    oklch(50% 0.18 240)
  );
  color: white;
  text-shadow: 0 1px 2px oklch(0% 0 0 / 0.3);
  box-shadow:
    0 1px 0 oklch(75% 0.2 240) inset,
    0 2px 4px var(--brand-primary) / 0.3;
}

.session-control-btn--primary:hover {
  transform: translateY(-1px);
  box-shadow:
    0 1px 0 oklch(75% 0.2 240) inset,
    0 4px 8px var(--brand-primary) / 0.4;
}

.session-control-btn--secondary {
  background: var(--surface-1);
  color: var(--text-1);
  border-color: var(--border-1);
  box-shadow:
    0 1px 0 oklch(100% 0 0 / 0.5) inset,
    0 2px 4px oklch(25% 0.03 240 / 0.1);
}

.session-control-btn--secondary:hover:not(:disabled) {
  background: var(--brand-primary);
  border-color: var(--brand-primary);
  color: white;
  transform: translateY(-1px);
}

.session-control-btn--neutral {
  background: var(--surface-3);
  color: var(--text-2);
  border-color: transparent;
}

.session-control-btn--neutral:hover {
  background: oklch(45% 0.1 45);
  color: white;
  transform: translateY(-1px);
}

.session-control-btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
  transform: none !important;
}

/* === SESSION COMPLETION SCREEN === */
.study-session-complete {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--surface-2);
  padding: var(--space-s);
  overflow-x: hidden;
}

.session-complete-content {
  max-width: calc(100vw - var(--space-m));
  width: 100%;
  background: var(--surface-1);
  border-radius: var(--radius-xl);
  padding: var(--space-m);
  border: 1px solid var(--border-1);
  text-align: center;
  animation: var(--animation-scale-up);
  overflow: hidden;
}

@media (min-width: 480px) {
  .study-session-complete {
    padding: var(--space-m);
  }

  .session-complete-content {
    max-width: calc(100vw - var(--space-l));
    padding: var(--space-l);
  }
}

@media (min-width: 768px) {
  .study-session-complete {
    padding: var(--space-l);
  }

  .session-complete-content {
    max-width: 700px;
    padding: var(--space-xl);
  }
}

@media (min-width: 1024px) {
  .session-complete-content {
    max-width: 900px;
    padding: var(--space-2xl);
  }
}

.session-complete-header {
  margin-bottom: var(--space-xl);
}

.session-complete-icon {
  font-size: var(--step-4);
  margin-bottom: var(--space-s);
  animation: celebrate 1s ease-in-out;
}

@keyframes celebrate {
  0%,
  100% {
    transform: scale(1) rotate(0deg);
  }
  25% {
    transform: scale(1.1) rotate(-5deg);
  }
  75% {
    transform: scale(1.1) rotate(5deg);
  }
}

.session-complete-title {
  font-size: var(--step-3);
  font-weight: var(--font-bold, 700);
  color: var(--text-1);
  margin-bottom: var(--space-2xs);
  background: linear-gradient(135deg, var(--brand-primary), var(--accent-sage));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.session-complete-subtitle {
  font-size: var(--step-0);
  color: var(--text-2);
  margin: 0;
}

.session-results-grid {
  display: grid;
  grid-template-columns: repeat(2, 1fr);
  grid-template-rows: repeat(3, 1fr);
  gap: clamp(0.5rem, 2vw, 1rem);
  margin-bottom: var(--space-xl);
  place-items: stretch;
  width: 100%;
  max-width: 100%;
  padding: 0;
  margin-left: auto;
  margin-right: auto;
}

/* Small tablets: keep 2x3 but with more spacing */
@media (min-width: 480px) {
  .session-results-grid {
    grid-template-columns: repeat(2, 1fr);
    grid-template-rows: repeat(3, 1fr);
    max-width: 400px;
    gap: clamp(0.75rem, 2.5vw, 1.25rem);
  }
}

/* Medium screens: transition to 3x2 layout */
@media (min-width: 640px) {
  .session-results-grid {
    grid-template-columns: repeat(3, 1fr);
    grid-template-rows: repeat(2, 1fr);
    max-width: 500px;
  }
}

/* Tablets and up: 3 columns with better proportions */
@media (min-width: 768px) {
  .session-results-grid {
    grid-template-columns: repeat(3, 1fr);
    max-width: 650px;
    grid-template-rows: repeat(2, 1fr);
  }
}

/* Large screens: maintain 3x2 layout with optimal sizing */
@media (min-width: 1024px) {
  .session-results-grid {
    grid-template-columns: repeat(3, 1fr);
    max-width: 750px;
    grid-template-rows: repeat(2, 1fr);
  }
}

/* Extra large: keep 3x2, increase max-width for better text legibility */
@media (min-width: 1200px) {
  .session-results-grid {
    grid-template-columns: repeat(3, 1fr);
    max-width: 900px;
    grid-template-rows: repeat(2, 1fr);
  }
}

.result-item {
  width: 100%;
  min-width: 0;
  max-width: 100%;
  height: auto;
  border-radius: var(--radius-3);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: clamp(0.5rem, 2vw, 2rem);
  background: var(--surface-2);
  border: 1px solid var(--border-1);
  transition: all 0.3s var(--ease-out-2);
  animation: var(--animation-fade-in);
  animation-delay: calc(var(--index, 0) * 0.1s);
  animation-fill-mode: both;
  text-align: center;
  box-sizing: border-box;
  overflow: hidden;
  aspect-ratio: 1.3 / 1;
  min-height: clamp(4rem, 10vw, 9rem);
}

/* Optimize for small screens (2x3 layout) */
@media (max-width: 639px) {
  .result-item {
    aspect-ratio: 1.4 / 1;
    min-height: clamp(3.5rem, 8vw, 5rem);
    padding: clamp(0.5rem, 1.5vw, 1rem);
  }
}

/* Medium screens and up (3x2 layout) */
@media (min-width: 640px) {
  .result-item {
    aspect-ratio: 1.2 / 1;
    min-height: clamp(4.5rem, 12vw, 9rem);
    padding: clamp(0.75rem, 2.5vw, 2rem);
  }
}

.result-item:hover {
  transform: translateY(var(--hover-lift, -2px));
  box-shadow: var(--shadow-3);
  background: var(--surface-1);
  border-color: var(--brand-primary);
}

.result-item--success {
  background: var(--success-bg, oklch(98% 0.03 160));
  border-color: var(--success-border, oklch(75% 0.15 160) / 0.3);
}

.result-item--error {
  background: var(--error-bg, oklch(98% 0.03 0));
  border-color: var(--error-border, oklch(70% 0.2 0) / 0.3);
}

.result-icon {
  font-size: clamp(1rem, 2vw + 0.5rem, 2.25rem);
  margin-bottom: clamp(0.125rem, 0.5vw, 0.75rem);
}

.result-number {
  font-size: clamp(1.25rem, 3vw + 0.5rem, 3rem);
  font-weight: 700;
  color: var(--text-1);
  margin-bottom: clamp(0.125rem, 0.5vw, 0.5rem);
  line-height: 0.9;
  word-break: keep-all;
}

.result-label {
  font-size: clamp(0.625rem, 1.5vw + 0.2rem, 1rem);
  color: var(--text-2);
  font-weight: 500;
  text-transform: uppercase;
  letter-spacing: clamp(0.02em, 0.3vw, 0.075em);
  hyphens: auto;
  word-break: break-word;
  line-height: 1.2;
  max-width: 100%;
  overflow-wrap: break-word;
}

/* Typography optimization for small screens (2x3) */
@media (max-width: 639px) {
  .result-icon {
    font-size: clamp(0.875rem, 3vw, 1.5rem);
    margin-bottom: clamp(0.125rem, 1vw, 0.375rem);
  }

  .result-number {
    font-size: clamp(1rem, 4vw, 1.75rem);
    margin-bottom: clamp(0.125rem, 0.5vw, 0.25rem);
    line-height: 1;
  }

  .result-label {
    font-size: clamp(0.5rem, 2.5vw, 0.75rem);
    line-height: 1.1;
    letter-spacing: clamp(0.01em, 0.2vw, 0.05em);
  }
}

/* Typography for medium screens and up (3x2) */
@media (min-width: 640px) {
  .result-icon {
    font-size: clamp(1.25rem, 2.5vw + 0.5rem, 2.25rem);
    margin-bottom: clamp(0.25rem, 1vw, 0.75rem);
  }

  .result-number {
    font-size: clamp(1.5rem, 3.5vw + 0.5rem, 3rem);
    margin-bottom: clamp(0.25rem, 0.75vw, 0.5rem);
    line-height: 0.9;
  }

  .result-label {
    font-size: clamp(0.75rem, 1.75vw + 0.25rem, 1rem);
    line-height: 1.3;
    letter-spacing: clamp(0.025em, 0.5vw, 0.075em);
  }
}

.session-complete-actions {
  display: flex;
  gap: var(--space-s);
  justify-content: center;
}

@media (max-width: 640px) {
  .session-complete-actions {
    flex-direction: column;
    align-items: center;
  }
}

/* === EMPTY STATE === */
.study-session-empty {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--surface-2);
  padding: var(--space-l);
}

.empty-state {
  text-align: center;
  max-width: 400px;
}

.empty-icon {
  font-size: var(--step-4);
  margin-bottom: var(--space-s);
  opacity: 0.6;
}

.empty-state h3 {
  font-size: var(--step-2);
  font-weight: 600;
  color: var(--text-1);
  margin-bottom: var(--space-2xs);
}

.empty-state p {
  color: var(--text-2);
  margin-bottom: var(--space-l);
  line-height: 1.5;
}

/* Animation stagger for result items */
.result-item:nth-child(1) {
  --index: 1;
}
.result-item:nth-child(2) {
  --index: 2;
}
.result-item:nth-child(3) {
  --index: 3;
}
.result-item:nth-child(4) {
  --index: 4;
}
.result-item:nth-child(5) {
  --index: 5;
}
.result-item:nth-child(6) {
  --index: 6;
}

/* === THEME TOGGLE COMPONENT === */
.theme-toggle {
  display: flex;
  align-items: center;
  gap: var(--space-2xs);
  padding: var(--space-2xs) var(--space-xs);
  border: 1px solid var(--border-1);
  border-radius: var(--radius-pill);
  background: var(--surface-1);
  color: var(--text-1);
  font-size: var(--step--1);
  font-weight: 500;
  cursor: pointer;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
}

.theme-toggle::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--brand-primary);
  opacity: 0;
  transition: opacity 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.theme-toggle:hover::before {
  opacity: 0.05;
}

.theme-toggle:hover {
  border-color: var(--brand-primary);
  transform: translateY(-1px);
  box-shadow: var(--shadow-sm);
}

.theme-toggle:active {
  transform: translateY(0);
  box-shadow: var(--shadow-xs);
}

.theme-toggle__icon {
  font-size: var(--step-0);
  transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  position: relative;
  z-index: 1;
}

.theme-toggle:hover .theme-toggle__icon {
  transform: scale(1.1) rotate(10deg);
}

.theme-toggle__label {
  font-size: var(--step--1);
  font-weight: 600;
  letter-spacing: 0.02em;
  position: relative;
  z-index: 1;
}

@media (max-width: 640px) {
  .theme-toggle__label {
    display: none;
  }

  .theme-toggle {
    padding: var(--space-2xs);
    min-width: 2.5rem;
    justify-content: center;
  }
}

/* === CARD FORM COMPONENT === */
.card-form-overlay {
  position: fixed;
  inset: 0;
  background: var(--surface-overlay);
  backdrop-filter: blur(8px);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: var(--space-s);
  z-index: 1000;
  animation: var(--animation-fade-in);
}

.card-form {
  background: var(--surface-1);
  border-radius: var(--radius-xl);
  box-shadow: var(--shadow-2xl);
  width: 100%;
  max-width: 600px;
  max-height: 90vh;
  overflow-y: auto;
  animation: var(--animation-scale-up);
}

.card-form__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-l) var(--space-l) var(--space-s);
  border-bottom: 1px solid var(--border-1);
}

.card-form__title {
  font-size: var(--step-1);
  font-weight: 700;
  color: var(--text-1);
  margin: 0;
}

.card-form__close {
  background: none;
  border: none;
  font-size: var(--step-0);
  color: var(--text-2);
  cursor: pointer;
  padding: var(--space-3xs);
  border-radius: var(--radius-2);
  transition: all 0.2s var(--ease-out-2);
}

.card-form__close:hover {
  background: var(--surface-3);
  color: var(--text-1);
}

.card-form__form {
  padding: var(--space-l);
  display: flex;
  flex-direction: column;
  gap: var(--space-m);
}

.form-group {
  display: flex;
  flex-direction: column;
  gap: var(--space-2xs);
}

.form-row {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--space-s);
}

@media (min-width: 640px) {
  .form-row {
    grid-template-columns: 1fr 200px;
  }
}

.form-label {
  font-size: var(--step--1);
  font-weight: 600;
  color: var(--text-1);
  margin-bottom: var(--space-3xs);
  text-wrap: pretty;
  text-align: left;
}

.form-input,
.form-textarea,
.form-select {
  padding: var(--space-xs) var(--space-s);
  border: 1px solid var(--border-1);
  border-radius: var(--radius-2);
  background: var(--surface-1);
  color: var(--text-1);
  font-size: var(--step--1);
  font-family: inherit;
  transition: all 0.2s var(--ease-out-2);
}

.form-input:focus,
.form-textarea:focus,
.form-select:focus {
  outline: 2px solid var(--brand-500);
  outline-offset: 2px;
  border-color: var(--border-focus);
  box-shadow: 0 0 0 3px var(--brand-primary) / 0.2;
}

.form-textarea {
  resize: vertical;
  min-height: 80px;
  font-family: inherit;
  line-height: 1.5;
}

.form-input.error,
.form-textarea.error,
.form-select.error {
  border-color: var(--border-error);
}

.form-error {
  font-size: var(--step--2);
  color: var(--error-500);
  font-weight: 500;
}

.tags-input {
  display: flex;
  gap: var(--space-2xs);
  align-items: stretch;
}

.tags-input .form-input {
  flex: 1;
}

.tags-list {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2xs);
  margin-top: var(--space-2xs);
}

.tag {
  display: inline-flex;
  align-items: center;
  gap: var(--space-3xs);
  padding: var(--space-3xs) var(--space-2xs);
  background: var(--brand-100);
  color: var(--brand-700);
  border-radius: var(--radius-pill);
  font-size: var(--step--2);
  font-weight: 500;
}

.tag__remove {
  background: none;
  border: none;
  color: inherit;
  cursor: pointer;
  padding: 2px;
  border-radius: 50%;
  transition: background-color 0.2s var(--ease-out-2);
  font-size: 10px;
  line-height: 1;
}

.tag__remove:hover {
  background: var(--brand-200);
}

.card-form__actions {
  display: flex;
  gap: var(--space-s);
  justify-content: flex-end;
  padding-top: var(--space-s);
  border-top: 1px solid var(--border-1);
}

.btn-sm {
  padding: var(--space-3xs) var(--space-xs);
  font-size: var(--step--2);
}

.btn-danger {
  --btn-bg: var(--error-500);
  --btn-color: var(--text-inverse);
  --btn-border: var(--error-600);
  --btn-shadow: var(--error-700);
  --btn-highlight: var(--error-400);

  background: linear-gradient(135deg, var(--btn-bg) 0%, var(--btn-border) 100%);
  border: 1px solid var(--btn-border);
  border-radius: var(--radius-2);
  color: var(--btn-color);
  cursor: pointer;
  font-size: var(--step--1);
  font-weight: 600;
  padding: var(--space-2xs) var(--space-s);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
}

.btn-danger:hover {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px var(--btn-shadow) / 0.3;
}

/* === CARD LIST COMPONENT === */
.card-list {
  width: 100%;
}

.card-list__header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  margin-bottom: var(--space-l);
  padding-bottom: var(--space-s);
  border-bottom: 1px solid var(--border-1);
}

.card-list__title {
  font-size: var(--step-1);
  font-weight: 700;
  color: var(--text-1);
  margin: 0;
}

.card-list__items {
  display: flex;
  flex-direction: column;
  gap: var(--space-s);
}

.card-list-empty {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 300px;
}

/* === CARD ITEM COMPONENT === */
.card-item {
  background: var(--surface-1);
  border: 1px solid var(--border-1);
  border-radius: var(--radius-3);
  padding: var(--space-l);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  display: flex;
  gap: var(--space-s);
  align-items: flex-start;
}

.card-item:hover {
  border-color: var(--brand-primary) / 0.3;
  box-shadow: var(--shadow-sm);
  transform: translateY(-1px);
}

.card-item__content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
}

.card-item__front,
.card-item__back {
  font-size: var(--step--1);
  line-height: 1.5;
}

.card-item__front {
  color: var(--text-1);
}

.card-item__back {
  color: var(--text-2);
}

.card-item__meta {
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: var(--space-2xs);
  margin-top: var(--space-2xs);
}

.card-item__category {
  background: var(--surface-3);
  color: var(--text-2);
  padding: var(--space-3xs) var(--space-2xs);
  border-radius: var(--radius-2);
  font-size: var(--step--2);
  font-weight: 500;
}

.card-item__difficulty {
  font-size: var(--step--2);
  font-weight: 600;
  text-transform: capitalize;
}

.card-item__tags {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-3xs);
}

.card-item__tag {
  background: var(--brand-100);
  color: var(--brand-700);
  padding: var(--space-3xs) var(--space-2xs);
  border-radius: var(--radius-pill);
  font-size: var(--step--2);
  font-weight: 500;
}

.card-item__tag-more {
  background: var(--surface-3);
  color: var(--text-3);
  padding: var(--space-3xs) var(--space-2xs);
  border-radius: var(--radius-pill);
  font-size: var(--step--2);
  font-weight: 500;
}

.card-item__actions {
  display: flex;
  gap: var(--space-3xs);
  flex-shrink: 0;
}

.card-action-btn {
  background: var(--surface-2);
  border: 1px solid var(--border-1);
  border-radius: var(--radius-2);
  padding: var(--space-2xs);
  cursor: pointer;
  transition: all 0.2s var(--ease-out-2);
  font-size: var(--step--1);
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 32px;
  height: 32px;
}

.card-action-btn:hover {
  background: var(--surface-3);
  transform: scale(1.05);
}

.card-action-btn--edit:hover {
  border-color: var(--brand-primary);
  background: var(--brand-50);
}

.card-action-btn--delete:hover {
  border-color: var(--error-500);
  background: var(--error-50);
}

/* === DELETE CONFIRMATION MODAL === */
.delete-confirm-overlay {
  position: fixed;
  inset: 0;
  background: var(--surface-overlay);
  backdrop-filter: blur(4px);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1001;
  animation: var(--animation-fade-in);
}

.delete-confirm {
  background: var(--surface-1);
  border-radius: var(--radius-3);
  padding: var(--space-l);
  max-width: 400px;
  width: 90%;
  box-shadow: var(--shadow-xl);
  animation: var(--animation-scale-up);
}

.delete-confirm h3 {
  font-size: var(--step-0);
  font-weight: 700;
  color: var(--text-1);
  margin: 0 0 var(--space-xs) 0;
}

.delete-confirm p {
  font-size: var(--step--1);
  color: var(--text-2);
  line-height: 1.5;
  margin: 0 0 var(--space-l) 0;
}

.delete-confirm__actions {
  display: flex;
  gap: var(--space-s);
  justify-content: flex-end;
}

/* === PROFESSIONAL INLINE PADDING UTILITIES === */
.px-professional-xs {
  padding-inline: var(--padding-inline-xs);
}

.px-professional-s {
  padding-inline: var(--padding-inline-s);
}

.px-professional-m {
  padding-inline: var(--padding-inline-m);
}

.px-professional-l {
  padding-inline: var(--padding-inline-l);
}

.px-professional-xl {
  padding-inline: var(--padding-inline-xl);
}

/* Professional container with responsive inline padding */
.container-professional {
  padding-inline: clamp(0.5rem, 2vw, 1rem);
  margin-inline: auto;
  max-width: 100vw;
  box-sizing: border-box;
}

@media (min-width: 768px) {
  .container-professional {
    padding-inline: var(--padding-inline-l);
  }
}

@media (min-width: 1024px) {
  .container-professional {
    padding-inline: var(--padding-inline-xl);
    max-width: 1400px;
  }
}

/* === ENHANCED DASHBOARD === */

/* Dashboard Header Improvements */
.dashboard-greeting {
  text-align: center;
  margin-bottom: var(--space-l);
}

.dashboard-subtitle-main {
  font-size: var(--step-2);
  margin: var(--space-xs) 0 var(--space-s);
  font-weight: 600;
}

/* Study Reminders */
.study-reminders {
  display: flex;
  flex-direction: column;
  gap: var(--space-s);
  margin-top: var(--space-l);
}

.study-reminder {
  display: flex;
  align-items: center;
  gap: var(--space-s);
  padding: var(--space-s) var(--space-m);
  border-radius: var(--radius-3);
  border-left: 4px solid var(--brand-500);
  background: var(--surface-1);
  transition: all 0.2s var(--ease-out-2);
}

.study-reminder--overdue {
  border-left-color: var(--error-500);
  background: oklch(from var(--error-500) l c h / 0.05);
}

.study-reminder--streak {
  border-left-color: var(--success-500);
  background: oklch(from var(--success-500) l c h / 0.05);
}

.reminder-icon {
  font-size: var(--step-0);
}

.reminder-message {
  flex: 1;
  font-weight: 500;
  color: var(--text-1);
}

.reminder-action {
  color: var(--brand-500);
  text-decoration: none;
  font-weight: 600;
  font-size: var(--step--1);
  transition: color 0.2s var(--ease-out-2);
}

.reminder-action:hover {
  color: var(--brand-600);
}

/* Enhanced Stat Cards */
.stat-card--interactive {
  cursor: pointer;
  text-decoration: none;
  color: inherit;
}

.stat-card--interactive:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
}

.stat-card--highlight {
  background: linear-gradient(
    135deg,
    oklch(from var(--success-500) l c h / 0.1),
    oklch(from var(--brand-500) l c h / 0.05)
  );
  border-color: var(--success-500);
}

.stat-card--urgent {
  border-color: var(--error-500);
  background: oklch(from var(--error-500) l c h / 0.03);
}

.stat-detail {
  font-size: var(--step--2);
  color: var(--text-3);
  margin-top: var(--space-2xs);
}

.stat-trend {
  position: absolute;
  top: var(--space-s);
  right: var(--space-s);
  font-size: var(--step-0);
  color: var(--text-3);
}

.stat-progress {
  height: 4px;
  background: var(--border-2);
  border-radius: var(--radius-pill);
  margin-top: var(--space-s);
  overflow: hidden;
}

.stat-progress-bar {
  height: 100%;
  background: linear-gradient(90deg, var(--brand-500), var(--accent-500));
  border-radius: var(--radius-pill);
  width: var(--progress, 0%);
  transition: width 1s var(--ease-out-2);
}

.stat-badge {
  position: absolute;
  top: -8px;
  right: -8px;
  background: var(--success-500);
  color: white;
  font-size: var(--step--2);
  padding: var(--space-2xs) var(--space-xs);
  border-radius: var(--radius-pill);
  font-weight: 600;
  transform: rotate(12deg);
}

.stat-pulse {
  position: absolute;
  top: var(--space-s);
  right: var(--space-s);
  width: 12px;
  height: 12px;
  background: var(--error-500);
  border-radius: 50%;
  animation: pulse 2s infinite;
}

@keyframes pulse {
  0%,
  100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.5;
    transform: scale(1.2);
  }
}

/* Section Headers */
.section-header {
  display: flex;
  flex-direction: column;
  gap: var(--space-2xs);
  margin-bottom: var(--space-l);
}

.section-subtitle {
  font-size: var(--step--1);
  color: var(--text-3);
}

/* Enhanced Action Cards */
.action-card--featured {
  position: relative;
  background: linear-gradient(
    135deg,
    oklch(from var(--brand-500) l c h / 0.1),
    oklch(from var(--accent-500) l c h / 0.05)
  );
  border-color: var(--brand-500);
  order: -1;
}

.action-icon--pulse {
  animation: bounce 2s infinite;
}

@keyframes bounce {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-4px);
  }
}

.action-badge {
  position: absolute;
  top: var(--space-s);
  right: var(--space-s);
  background: var(--error-500);
  color: white;
  font-size: var(--step--2);
  padding: var(--space-2xs) var(--space-xs);
  border-radius: var(--radius-pill);
  font-weight: 600;
}

.action-meta {
  position: absolute;
  bottom: var(--space-s);
  right: var(--space-s);
  font-size: var(--step--2);
  color: var(--text-3);
  font-weight: 500;
}

/* Enhanced Deck Cards */
.deck-card--enhanced {
  position: relative;
  padding: var(--space-l);
  display: flex;
  flex-direction: column;
  gap: var(--space-m);
  min-height: 280px;
  height: 100%;
}

.deck-card--enhanced:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-xl);
}

.deck-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  gap: var(--space-m);
}

.deck-info {
  flex: 1;
}

.deck-meta {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  margin-top: var(--space-2xs);
  font-size: var(--step--2);
  color: var(--text-3);
}

.deck-dot {
  color: var(--border-2);
}

.deck-category {
  font-weight: 500;
}

.deck-progress-ring {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
}

.progress-text {
  position: absolute;
  font-size: var(--step--2);
  font-weight: 600;
  color: var(--brand-500);
}

.deck-stats {
  display: flex;
  gap: var(--space-s);
  padding: var(--space-s);
  background: var(--surface-2);
  border-radius: var(--radius-2);
  border: 1px solid var(--border-1);
  flex-wrap: wrap;
}

.deck-stat {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  font-size: var(--step--2);
  color: var(--text-2);
  flex: 1;
  min-width: 0; /* Allow text to shrink */
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.stat-icon {
  font-size: var(--step--1);
}

.btn-primary--full {
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-xs);
}

.btn-secondary--outline {
  background: transparent;
  border: 1px solid var(--border-2);
  color: var(--text-2);
}

.btn-secondary--outline:hover {
  background: var(--brand-500);
  border-color: var(--brand-500);
  color: white;
}

.btn-icon {
  font-size: var(--step--1);
}

/* === DECKS PAGE === */
.page-actions-top {
  display: flex;
  justify-content: center;
  margin: var(--space-xl) 0;
  padding-bottom: var(--space-l);
}

.page-actions-top .btn-primary {
  padding: var(--space-s) var(--space-l);
  font-weight: 600;
  letter-spacing: 0.025em;
}

@media (max-width: 640px) {
  .page-actions-top {
    margin: var(--space-l) 0;
    padding-bottom: var(--space-s);
  }

  .page-actions-top .btn-primary {
    width: 100%;
    max-width: 280px;
    text-align: center;
  }
}

/* === NEW DECK PAGE === */
.deck-form-container {
  max-width: 600px;
  margin: 0 auto;
  padding: var(--space-l);
}

.deck-form {
  background: var(--surface-1);
  border: 1px solid var(--border-1);
  border-radius: var(--radius-xl);
  padding: var(--space-xl);
  box-shadow: var(--shadow-md);
}

.deck-form .form-group {
  margin-bottom: var(--space-l);
}

.deck-form .form-group:last-of-type {
  margin-bottom: var(--space-xl);
}

.deck-form .form-actions {
  display: flex;
  gap: var(--space-s);
  justify-content: flex-end;
  align-items: center;
  padding-top: var(--space-s);
  border-top: 1px solid var(--border-1);
  margin-top: var(--space-l);
}

@media (max-width: 640px) {
  .deck-form-container {
    padding: var(--space-s);
  }

  .deck-form {
    padding: var(--space-l);
  }

  .deck-form .form-actions {
    flex-direction: column-reverse;
    gap: var(--space-s);
  }

  .deck-form .form-actions .btn-primary,
  .deck-form .form-actions .btn-secondary {
    width: 100%;
    text-align: center;
  }
}

/* === LOGIN PAGE === */
.login-page {
  min-height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--surface-2);
  padding: var(--space-s);
}

.login-container {
  background: var(--surface-1);
  border-radius: var(--radius-xl);
  border: 1px solid var(--border-1);
  box-shadow: var(--shadow-2xl);
  width: 100%;
  max-width: 400px;
  padding: var(--space-xl);
  animation: var(--animation-scale-up);
}

.login-header {
  text-align: center;
  margin-bottom: var(--space-l);
}

.login-logo {
  display: inline-block;
  font-size: var(--step-1);
  font-weight: 700;
  text-decoration: none;
  color: var(--brand-primary);
  margin-bottom: var(--space-s);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.login-logo:hover {
  transform: scale(1.05);
  color: var(--brand-600);
}

.login-title {
  font-size: var(--step-2);
  font-weight: 700;
  color: var(--text-1);
  margin: 0 0 var(--space-2xs) 0;
  background: linear-gradient(135deg, var(--brand-primary), var(--accent-sage));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.login-subtitle {
  font-size: var(--step--1);
  color: var(--text-2);
  margin: 0;
  line-height: 1.5;
}

.auth-error {
  display: flex;
  align-items: center;
  gap: var(--space-2xs);
  background: var(--error-bg, oklch(98% 0.03 0));
  border: 1px solid var(--error-border, oklch(70% 0.2 0) / 0.3);
  color: var(--error-500);
  padding: var(--space-s);
  border-radius: var(--radius-2);
  margin-bottom: var(--space-l);
  font-size: var(--step--1);
  font-weight: 500;
  animation: var(--animation-fade-in);
}

.error-icon {
  font-size: var(--step-0);
  flex-shrink: 0;
}

.login-form {
  display: flex;
  flex-direction: column;
  gap: var(--space-m);
  margin-bottom: var(--space-l);
}

.login-submit {
  width: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: var(--space-2xs);
  font-weight: 700;
  font-size: var(--step-0);
  padding: var(--space-s) var(--space-m);
  margin-top: var(--space-s);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.login-submit:disabled {
  opacity: 0.7;
  cursor: not-allowed;
  transform: none !important;
}

.loading-spinner {
  font-size: var(--step-0);
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

.login-footer {
  text-align: center;
  padding-top: var(--space-l);
  border-top: 1px solid var(--border-1);
}

.login-footer p {
  margin: 0 0 var(--space-s) 0;
  font-size: var(--step--1);
  color: var(--text-2);
}

.link-button {
  background: none;
  border: none;
  color: var(--brand-primary);
  cursor: pointer;
  font-size: inherit;
  font-weight: 600;
  text-decoration: underline;
  text-underline-offset: 2px;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.link-button:hover:not(:disabled) {
  color: var(--brand-600);
  text-decoration-thickness: 2px;
}

.link-button:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.demo-credentials {
  background: var(--surface-3);
  border-radius: var(--radius-2);
  padding: var(--space-s);
  margin-top: var(--space-s);
}

.demo-credentials h4 {
  font-size: var(--step--1);
  font-weight: 700;
  color: var(--text-1);
  margin: 0 0 var(--space-2xs) 0;
}

.demo-credentials p {
  font-size: var(--step--2);
  color: var(--text-2);
  margin: var(--space-3xs) 0;
  font-family: var(--font-mono, monospace);
  font-weight: 500;
}

/* Mobile optimizations for login */
@media (max-width: 640px) {
  .login-container {
    max-width: 100%;
    margin: var(--space-s);
    padding: var(--space-l);
  }

  .login-title {
    font-size: var(--step-1);
  }
}

/* === LANDING PAGE === */
.landing-page {
  min-height: 100vh;
  background: var(--surface-1);
}

.landing-container {
  max-width: 1200px;
  margin: 0 auto;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

.landing-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-l) var(--space-l) 0;
  margin-bottom: var(--space-xl);
}

.landing-logo {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  font-size: var(--step-1);
  font-weight: 700;
  color: var(--brand-primary);
}

.logo-svg {
  width: 2.5rem;
  height: 2.5rem;
  color: var(--theme-accent);
  transition: all var(--duration-sm) var(--ease-out-2);
}

.logo-text {
  background: var(--theme-accent-gradient);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  font-weight: 800;
  letter-spacing: -0.02em;
}

.landing-logo:hover .logo-svg {
  transform: scale(1.1) rotate(5deg);
  filter: drop-shadow(0 4px 8px var(--theme-accent) / 0.3);
}

.landing-logo:hover .logo-text {
  transform: translateY(-1px);
}

.landing-nav {
  display: flex;
  gap: var(--space-s);
}

.landing-main {
  flex: 1;
  padding: 0 var(--space-l);
}

.hero-section {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--space-xl);
  align-items: center;
  margin-bottom: var(--space-2xl);
  min-height: 60vh;
}

@media (min-width: 768px) {
  .hero-section {
    grid-template-columns: 1fr 400px;
    gap: var(--space-2xl);
  }
}

.hero-content {
  text-align: center;
}

@media (min-width: 768px) {
  .hero-content {
    text-align: left;
  }
}

.hero-title {
  font-size: var(--step-4);
  font-weight: 700;
  color: var(--text-1);
  margin: 0 0 var(--space-s) 0;
  line-height: 1.1;
}

.hero-highlight {
  background: linear-gradient(135deg, var(--brand-primary), var(--accent-sage));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.hero-subtitle {
  font-size: var(--step-0);
  color: var(--text-2);
  margin: 0 0 var(--space-xl) 0;
  line-height: 1.6;
  max-width: 500px;
}

@media (min-width: 768px) {
  .hero-subtitle {
    margin: 0 0 var(--space-xl) 0;
  }
}

.hero-actions {
  display: flex;
  flex-direction: column;
  gap: var(--space-s);
  align-items: center;
}

@media (min-width: 640px) {
  .hero-actions {
    flex-direction: row;
    justify-content: center;
  }
}

@media (min-width: 768px) {
  .hero-actions {
    justify-content: flex-start;
  }
}

.btn-large {
  padding: var(--space-s) var(--space-l);
  font-size: var(--step-0);
  font-weight: 700;
  min-width: 180px;
}

.hero-visual {
  display: flex;
  justify-content: center;
  align-items: center;
}

.demo-card {
  width: 300px;
  height: 200px;
  position: relative;
  transform-style: preserve-3d;
  transition: transform 0.6s cubic-bezier(0.4, 0, 0.2, 1);
  animation: float 3s ease-in-out infinite;
}

.demo-card:hover {
  transform: rotateY(180deg);
}

@keyframes float {
  0%,
  100% {
    transform: translateY(0px) rotateX(5deg);
  }
  50% {
    transform: translateY(-10px) rotateX(5deg);
  }
}

/* === HERO LOGO STYLING === */
.hero-logo-container {
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: var(--space-xl);
  
  /* WCAG compliant background with proper contrast */
  background: radial-gradient(
    circle at center,
    var(--surface-1) 0%,
    var(--surface-2) 50%,
    transparent 100%
  );
  border-radius: 50%;
  border: 2px solid var(--border-2);
  
  /* Glassmorphism effect for modern look */
  backdrop-filter: var(--blur-sm);
  -webkit-backdrop-filter: var(--blur-sm);
  
  /* Ensure minimum contrast for accessibility */
  box-shadow: 
    0 8px 32px var(--shadow-color) / 0.1,
    inset 0 1px 0 var(--surface-3) / 0.1;
  
  /* Responsive sizing */
  width: clamp(240px, 25vw, 320px);
  height: clamp(240px, 25vw, 320px);
  
  /* Smooth transitions */
  transition: all var(--duration-md) var(--ease-out-2);
}

.hero-logo {
  width: 200px;
  height: 200px;
  color: var(--theme-accent);
  animation: heroFloat 4s ease-in-out infinite;
  transition: all var(--duration-lg) var(--ease-out-2);
  filter: drop-shadow(0 8px 24px var(--theme-accent) / 0.2);
}

.hero-logo-glow {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 300px;
  height: 300px;
  background: radial-gradient(
    circle,
    var(--theme-accent) / 0.1 0%,
    var(--theme-accent) / 0.05 30%,
    transparent 70%
  );
  border-radius: 50%;
  animation: pulse 3s ease-in-out infinite;
  pointer-events: none;
}

/* Enhanced hover state with WCAG compliance */
.hero-logo-container:hover {
  border-color: var(--border-3);
  box-shadow: 
    0 16px 48px var(--shadow-color) / 0.2,
    inset 0 1px 0 var(--surface-3) / 0.2,
    0 0 0 3px var(--theme-accent) / 0.1; /* Focus ring for accessibility */
  
  /* Enhanced glassmorphism on hover */
  backdrop-filter: var(--blur-md);
  -webkit-backdrop-filter: var(--blur-md);
}

.hero-logo-container:hover .hero-logo {
  transform: scale(1.05) rotate(3deg);
  filter: drop-shadow(0 12px 32px var(--theme-accent) / 0.4);
}

/* Auto mode: Use same gorgeous gradient as navigation */
:root:not([data-theme]) .hero-logo-container {
  background: linear-gradient(135deg, 
    oklch(18% 0.08 240 / 0.85) 0%,
    oklch(15% 0.06 250 / 0.9) 50%,
    oklch(12% 0.04 220 / 0.88) 100%) !important;
  backdrop-filter: blur(20px) saturate(150%) !important;
  -webkit-backdrop-filter: blur(20px) saturate(150%) !important;
  border: 1px solid oklch(35% 0.08 240 / 0.4);
  box-shadow: 
    0 8px 32px oklch(8% 0.15 240 / 0.6),
    0 1px 0 oklch(25% 0.05 240 / 0.3) inset;
}

/* Dark mode specific enhancements */
[data-theme='dark'] .hero-logo-container {
  background: radial-gradient(
    circle at center,
    var(--surface-1) 0%,
    var(--surface-2) 40%,
    transparent 100%
  );
  border-color: var(--border-3);
  box-shadow: 
    0 8px 32px oklch(0% 0 0 / 0.3),
    inset 0 1px 0 var(--surface-3) / 0.2;
}

/* Auto mode hover: Enhanced navigation-style gradient */
:root:not([data-theme]) .hero-logo-container:hover {
  background: linear-gradient(135deg, 
    oklch(20% 0.10 240 / 0.9) 0%,
    oklch(17% 0.08 250 / 0.95) 50%,
    oklch(14% 0.06 220 / 0.92) 100%) !important;
  backdrop-filter: blur(24px) saturate(180%) !important;
  -webkit-backdrop-filter: blur(24px) saturate(180%) !important;
  border-color: oklch(40% 0.10 240 / 0.6);
  box-shadow: 
    0 16px 48px oklch(6% 0.18 240 / 0.8),
    0 1px 0 oklch(30% 0.07 240 / 0.4) inset,
    0 0 0 3px var(--theme-accent) / 0.3;
}

[data-theme='dark'] .hero-logo-container:hover {
  box-shadow: 
    0 16px 48px oklch(0% 0 0 / 0.4),
    inset 0 1px 0 var(--surface-3) / 0.3,
    0 0 0 3px var(--theme-accent) / 0.2;
}

@keyframes heroFloat {
  0%, 100% {
    transform: translateY(0px) rotateZ(0deg);
  }
  25% {
    transform: translateY(-8px) rotateZ(1deg);
  }
  50% {
    transform: translateY(-12px) rotateZ(0deg);
  }
  75% {
    transform: translateY(-8px) rotateZ(-1deg);
  }
}

@keyframes pulse {
  0%, 100% {
    opacity: 0.3;
    transform: translate(-50%, -50%) scale(0.8);
  }
  50% {
    opacity: 0.6;
    transform: translate(-50%, -50%) scale(1.2);
  }
}

.demo-card-front,
.demo-card-back {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  border-radius: var(--radius-xl);
  padding: var(--space-l);
  display: flex;
  align-items: center;
  justify-content: center;
  text-align: center;
  box-shadow: var(--shadow-xl);
  border: 1px solid var(--border-1);
}

.demo-card-front {
  background: linear-gradient(135deg, var(--brand-primary), var(--brand-600));
  color: white;
}

.demo-card-back {
  background: var(--surface-1);
  color: var(--text-1);
  transform: rotateY(180deg);
}

.demo-card h3 {
  font-size: var(--step-1);
  font-weight: 700;
  margin: 0;
}

.demo-card p {
  font-size: var(--step--1);
  margin: 0;
  line-height: 1.4;
}

.features-section {
  margin-bottom: var(--space-2xl);
}

.features-title {
  font-size: var(--step-3);
  font-weight: 700;
  color: var(--text-1);
  text-align: center;
  margin: 0 0 var(--space-xl) 0;
}

.features-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: var(--space-l);
}

@media (min-width: 640px) {
  .features-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

@media (min-width: 1024px) {
  .features-grid {
    grid-template-columns: repeat(4, 1fr);
  }
}

.feature-card {
  background: var(--surface-2);
  border: 1px solid var(--border-1);
  border-radius: var(--radius-3);
  padding: var(--space-l);
  text-align: center;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.feature-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-lg);
  border-color: var(--brand-primary) / 0.3;
}

.feature-icon {
  font-size: var(--step-3);
  margin-bottom: var(--space-s);
}

.feature-card h3 {
  font-size: var(--step-0);
  font-weight: 700;
  color: var(--text-1);
  margin: 0 0 var(--space-2xs) 0;
}

.feature-card p {
  font-size: var(--step--1);
  color: var(--text-2);
  margin: 0;
  line-height: 1.5;
}

.cta-section {
  background: var(--surface-2);
  border-radius: var(--radius-xl);
  padding: var(--space-2xl);
  text-align: center;
  margin-bottom: var(--space-xl);
  border: 1px solid var(--border-1);
}

.cta-content h2 {
  font-size: var(--step-2);
  font-weight: 700;
  color: var(--text-1);
  margin: 0 0 var(--space-s) 0;
}

.cta-content p {
  font-size: var(--step-0);
  color: var(--text-2);
  margin: 0 0 var(--space-l) 0;
  line-height: 1.6;
}

.landing-footer {
  text-align: center;
  padding: var(--space-l);
  border-top: 1px solid var(--border-1);
  color: var(--text-2);
  font-size: var(--step--1);
}

/* Mobile optimizations for landing */
@media (max-width: 640px) {
  .landing-header {
    padding: var(--space-s) var(--space-s) 0;
  }

  .landing-main {
    padding: 0 var(--space-s);
  }

  .hero-title {
    font-size: var(--step-3);
  }

  .btn-large {
    width: 100%;
    max-width: 280px;
  }
}

/* === ENHANCED FLASHCARD FEATURES === */

/* Enhanced Hover State */
.flashcard--hovered {
  --glow-opacity: 0.8;
  transform: translateY(-12px) rotateX(3deg) rotateY(3deg) scale(1.02);
}

.flashcard--hovered .flashcard__sparkles {
  opacity: 1;
}

/* Success/Error Feedback */
.flashcard--success {
  animation: successPulse 1s ease-out;
}

.flashcard--error {
  animation: errorShake 0.6s ease-out;
}

@keyframes successPulse {
  0% {
    transform: scale(1);
    filter: hue-rotate(0deg);
  }
  50% {
    transform: scale(1.05);
    filter: hue-rotate(120deg) brightness(1.2);
  }
  100% {
    transform: scale(1);
    filter: hue-rotate(0deg);
  }
}

@keyframes errorShake {
  0%,
  100% {
    transform: translateX(0);
    filter: hue-rotate(0deg);
  }
  10%,
  30%,
  50%,
  70%,
  90% {
    transform: translateX(-8px);
    filter: hue-rotate(-30deg) saturate(1.5);
  }
  20%,
  40%,
  60%,
  80% {
    transform: translateX(8px);
    filter: hue-rotate(-30deg) saturate(1.5);
  }
}

/* Enhanced Meta Section */
.flashcard__meta {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: var(--space-s);
  flex-wrap: wrap;
}

.flashcard__stats {
  display: flex;
  gap: var(--space-xs);
  font-size: var(--text-xs);
  color: var(--text-2);
}

.flashcard__stat {
  display: flex;
  align-items: center;
  gap: 2px;
  padding: 2px var(--space-xs);
  background: var(--surface-3);
  border-radius: var(--radius-2);
  font-weight: 500;
}

.flashcard__tags .flashcard__tag {
  font-size: var(--text-xs);
  color: var(--brand-600);
  font-weight: 500;
}

/* Enhanced Flip Hint Button */
.flashcard__flip-hint {
  background: var(--brand-500);
  color: var(--surface-1);
  border: none;
  padding: var(--space-xs) var(--space-s);
  border-radius: var(--radius-3);
  font-size: var(--text-sm);
  cursor: pointer;
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  transition: all 0.2s var(--ease-out-2);
  position: relative;
  overflow: hidden;
}

.flashcard__flip-hint::before {
  content: '';
  position: absolute;
  inset: 0;
  background: linear-gradient(
    45deg,
    transparent 30%,
    rgba(255, 255, 255, 0.2) 50%,
    transparent 70%
  );
  transform: translateX(-100%);
  transition: transform 0.6s ease;
}

.flashcard__flip-hint:hover::before {
  transform: translateX(100%);
}

.flashcard__flip-hint:hover {
  background: var(--brand-600);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px var(--brand-500) / 0.3;
}

.flashcard__flip-hint:active {
  transform: translateY(0);
  box-shadow: 0 2px 6px var(--brand-500) / 0.3;
}

/* Performance optimizations for animations */
.flashcard,
.flashcard__inner,
.flashcard__glow,
.flashcard__sparkles {
  will-change: transform, opacity;
}

/* === ENHANCED NAVIGATION FEATURES === */

/* Navigation badges for item counts */
.nav-badge {
  position: absolute;
  top: -2px;
  right: -2px;
  background: var(--brand-500);
  color: var(--surface-1);
  font-size: 10px;
  font-weight: 600;
  padding: 2px 5px;
  border-radius: 10px;
  min-width: 16px;
  height: 16px;
  text-align: center;
  line-height: 12px;
  box-shadow: 0 2px 4px var(--shadow-color) / 0.2;
  animation: badgePulse 2s ease-in-out infinite;
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 10;
}

@keyframes badgePulse {
  0%,
  100% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.1);
  }
}

/* Enhanced nav-item with proper badge support */
.nav-item {
  position: relative;
  transition: all 0.2s var(--ease-out-2);
  overflow: visible; /* Allow badges to show */
  margin: 2px; /* Add small margin to prevent badge clipping */
}

.nav-item:hover {
  transform: translateY(-1px);
}

.nav-item:hover .nav-badge {
  animation: none;
  transform: scale(1.1);
}

/* Ensure nav containers allow badge overflow */
.nav-items {
  overflow: visible !important;
}

.desktop-nav {
  overflow: visible;
}

/* Enhanced search functionality */
.nav-search {
  position: relative;
  display: flex;
  align-items: center;
  gap: var(--space-xs);
}

.search-toggle {
  background: none;
  border: none;
  font-size: var(--text-lg);
  cursor: pointer;
  padding: var(--space-xs);
  border-radius: var(--radius-2);
  transition: all 0.2s var(--ease-out-2);
  display: flex;
  align-items: center;
  justify-content: center;
  min-width: 36px;
  height: 36px;
}

.search-toggle:hover {
  background: var(--surface-2);
  transform: scale(1.1);
}

.search-input-container {
  position: absolute;
  right: 0;
  top: 100%;
  margin-top: var(--space-xs);
  display: flex;
  align-items: center;
  background: var(--surface-1);
  border: 1px solid var(--border-1);
  border-radius: var(--radius-3);
  padding: var(--space-xs);
  box-shadow: var(--shadow-lg);
  min-width: 240px;
  z-index: 1000;
  animation: searchSlideIn 0.2s var(--ease-out-2);
}

@keyframes searchSlideIn {
  from {
    opacity: 0;
    transform: translateY(-8px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

.search-input {
  flex: 1;
  border: none;
  background: none;
  font-size: var(--text-sm);
  padding: var(--space-xs);
  outline: none;
  color: var(--text-1);
}

.search-input::placeholder {
  color: var(--text-2);
}

.search-clear {
  background: none;
  border: none;
  cursor: pointer;
  color: var(--text-2);
  padding: var(--space-xs);
  border-radius: var(--radius-2);
  transition: all 0.2s var(--ease-out-2);
}

.search-clear:hover {
  background: var(--surface-2);
  color: var(--text-1);
}

/* Breadcrumb navigation */
.breadcrumb-container {
  background: var(--surface-1);
  border-bottom: 1px solid var(--border-1);
  padding: var(--space-s) var(--space-l);
  animation: breadcrumbSlideIn 0.3s var(--ease-out-2);
  width: 100%;
  box-sizing: border-box;
  overflow: hidden;
}

@keyframes breadcrumbSlideIn {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.breadcrumb {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  font-size: var(--text-sm);
  max-width: var(--container-max-width);
  margin: 0 auto;
  flex-wrap: wrap;
  overflow: hidden;
}

.breadcrumb-item {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  flex-shrink: 1;
  min-width: 0;
  max-width: 100%;
}

.breadcrumb-link {
  color: var(--text-2);
  text-decoration: none;
  padding: var(--space-xs) var(--space-s);
  border-radius: var(--radius-2);
  transition: all 0.2s var(--ease-out-2);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 200px;
  flex-shrink: 1;
  min-width: 0;
}

.breadcrumb-link:hover {
  color: var(--brand-500);
  background: var(--surface-2);
  text-decoration: none;
}

.breadcrumb-separator {
  color: var(--text-3);
  font-size: var(--text-xs);
  user-select: none;
}

.breadcrumb-current {
  color: var(--text-1);
  font-weight: 500;
  padding: var(--space-xs) var(--space-s);
  background: var(--surface-2);
  border-radius: var(--radius-2);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 200px;
  flex-shrink: 1;
  min-width: 0;
}

/* Mobile search enhancements */
@media (max-width: 768px) {
  .nav-search {
    display: none; /* Hide search on mobile for now */
  }

  .breadcrumb-container {
    padding: var(--space-xs) var(--space-s);
    overflow-x: hidden;
  }

  .breadcrumb {
    font-size: var(--text-xs);
    gap: 2px;
    flex-wrap: wrap;
  }

  .breadcrumb-link,
  .breadcrumb-current {
    padding: 2px var(--space-xs);
    font-size: var(--text-xs);
    max-width: 120px;
  }
  
  .breadcrumb-separator {
    font-size: 10px;
    margin: 0 1px;
  }
  
  /* Hide intermediate breadcrumbs on very small screens */
  @media (max-width: 480px) {
    .breadcrumb-item:not(:first-child):not(:last-child) {
      display: none;
    }
    
    .breadcrumb-item:nth-last-child(2) .breadcrumb-separator {
      display: none;
    }
    
    .breadcrumb-item:nth-last-child(2)::after {
      content: '...';
      color: var(--text-3);
      padding: 0 var(--space-xs);
    }
    
    .breadcrumb-link,
    .breadcrumb-current {
      max-width: 80px;
      font-size: 11px;
    }
  }
  
  /* iPhone SE specific (375px and smaller) */
  @media (max-width: 375px) {
    .breadcrumb-container {
      padding: var(--space-xs) var(--space-xs);
      position: relative;
      max-width: 280px; /* Hard limit */
      overflow: hidden;
    }
    
    /* Add a fade gradient to show truncation */
    .breadcrumb-container::after {
      content: '';
      position: absolute;
      top: 0;
      right: 0;
      width: 20px;
      height: 100%;
      background: linear-gradient(to right, transparent, var(--surface-1));
      pointer-events: none;
    }
    
    .breadcrumb {
      gap: 1px;
      flex-wrap: nowrap;
      overflow: hidden;
      width: 100%;
      max-width: 260px; /* Even harder limit */
    }
    
    .breadcrumb-item {
      flex-shrink: 1;
      overflow: hidden;
    }
    
    .breadcrumb-link,
    .breadcrumb-current {
      max-width: 180px; /* Much smaller */
      font-size: 10px;
      padding: 1px 4px;
      flex-shrink: 1;
      min-width: 0;
      display: block;
      overflow: hidden;
      text-overflow: ellipsis;
      white-space: nowrap;
    }
    
    .breadcrumb-separator {
      font-size: 8px;
      margin: 0;
      flex-shrink: 0;
    }
    
    /* Show only last breadcrumb on iPhone SE */
    .breadcrumb-item:not(:last-child) {
      display: none;
    }
    
    /* Add back arrow before last breadcrumb */
    .breadcrumb-item:last-child::before {
      content: '← ';
      color: var(--text-3);
      font-size: 10px;
      margin-right: 2px;
      flex-shrink: 0;
    }
  }
  
  /* Extra small screens (iPhone SE in portrait) */
  @media (max-width: 320px) {
    .breadcrumb-container {
      padding: 2px 4px;
      max-width: 220px; /* Even smaller hard limit */
    }
    
    .breadcrumb {
      max-width: 200px;
    }
    
    .breadcrumb-link,
    .breadcrumb-current {
      max-width: 120px; /* Smaller limit */
      font-size: 9px;
      padding: 1px 2px;
      flex-shrink: 1;
      min-width: 0;
    }
  }
}

/* Enhanced navigation item tooltips */
.nav-item[title]:hover::after {
  content: attr(title);
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%);
  background: var(--surface-4);
  color: var(--text-1);
  padding: var(--space-xs) var(--space-s);
  border-radius: var(--radius-2);
  font-size: var(--text-xs);
  white-space: nowrap;
  z-index: 1000;
  margin-bottom: var(--space-xs);
  box-shadow: var(--shadow-md);
  pointer-events: none;
  animation: tooltipFadeIn 0.2s var(--ease-out-2);
}

@keyframes tooltipFadeIn {
  from {
    opacity: 0;
    transform: translateX(-50%) translateY(4px);
  }
  to {
    opacity: 1;
    transform: translateX(-50%) translateY(0);
  }
}

/* Enhanced mobile menu with badges */
.mobile-menu-item {
  position: relative;
}

.mobile-menu-item .nav-badge {
  top: 8px;
  right: 8px;
}

/* Prevent double-click zoom on navigation - simplified */
.navigation {
  -webkit-tap-highlight-color: transparent;
}

/* Ensure navigation links work properly */
.nav-item {
  pointer-events: auto;
  cursor: pointer;
  user-select: none;
}

.nav-item:active {
  transform: scale(0.98);
}

/* Allow text selection in form inputs */
input,
textarea,
.search-input {
  user-select: text !important;
  -webkit-user-select: text !important;
  -moz-user-select: text !important;
  -ms-user-select: text !important;
}

/* Temporary hamburger button styles */
.hamburger-button {
  background: none;
  border: none;
  font-size: var(--text-xl);
  cursor: pointer;
  padding: var(--space-xs);
  border-radius: var(--radius-2);
  transition: all 0.2s var(--ease-out-2);
  color: var(--text-1);
  user-select: none;
}

.hamburger-button:hover {
  background: var(--surface-2);
}

/* Loading Styles */
.app-loading,
.page-loading {
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 50vh;
  color: var(--text-2);
  font-size: var(--text-sm);
}

.loading-spinner {
  padding: var(--space-l);
  border-radius: var(--radius-2);
  background: var(--surface-1);
  border: 1px solid var(--border-1);
}

/* Modal Styles */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: oklch(25% 0.02 240 / 0.5);
  backdrop-filter: blur(4px);
  z-index: 1000;
  animation: modalOverlayFadeIn 0.2s var(--ease-out-2);
}

@keyframes modalOverlayFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.modal-content {
  position: fixed;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  background: var(--surface-1);
  border-radius: var(--radius-3);
  border: 1px solid var(--border-1);
  box-shadow: var(--shadow-xl);
  min-width: 320px;
  max-width: 90vw;
  max-height: 90vh;
  z-index: 1001;
  animation: modalContentSlideIn 0.3s var(--ease-out-3);
}

@keyframes modalContentSlideIn {
  from {
    opacity: 0;
    transform: translate(-50%, -50%) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translate(-50%, -50%) scale(1);
  }
}

.modal-header {
  padding: var(--space-l) var(--space-l) var(--space-m) var(--space-l);
  border-bottom: 1px solid var(--border-1);
}

.modal-title {
  margin: 0;
  font-size: var(--text-lg);
  font-weight: 600;
  color: var(--text-1);
}

.modal-body {
  padding: var(--space-l);
  color: var(--text-2);
  line-height: 1.6;
}

.modal-body p {
  margin: 0 0 var(--space-s) 0;
}

.modal-body p:last-child {
  margin-bottom: 0;
}

.modal-warning {
  color: oklch(55% 0.15 15);
  font-weight: 500;
  font-size: var(--text-sm);
}

.modal-actions {
  padding: var(--space-m) var(--space-l) var(--space-l) var(--space-l);
  display: flex;
  gap: var(--space-s);
  justify-content: flex-end;
  border-top: 1px solid var(--border-1);
  background: var(--surface-0);
  border-bottom-left-radius: var(--radius-3);
  border-bottom-right-radius: var(--radius-3);
}

/* Responsive modal */
@media (max-width: 640px) {
  .modal-content {
    min-width: 280px;
    margin: var(--space-s);
  }

  .modal-header,
  .modal-body,
  .modal-actions {
    padding-left: var(--space-m);
    padding-right: var(--space-m);
  }

  .modal-actions {
    flex-direction: column-reverse;
  }

  .modal-actions .btn-danger,
  .modal-actions .btn-secondary {
    width: 100%;
    justify-content: center;
  }
}

/* === SEARCH BOX COMPONENT === */
.search-box {
  position: relative;
  width: 100%;
  max-width: 500px;
  margin: 0 auto;
}

.search-box__input-wrapper {
  position: relative;
  display: flex;
  align-items: center;
  background: var(--surface-1);
  border: 2px solid var(--border-1);
  border-radius: var(--radius-3);
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 1px 3px oklch(25% 0.03 240 / 0.1);
}

.search-box--focused .search-box__input-wrapper {
  border-color: var(--brand-2);
  box-shadow: 
    0 0 0 3px var(--brand-2) / 0.1,
    0 4px 12px oklch(25% 0.03 240 / 0.15);
}

.search-box__icon {
  position: absolute;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 20px;
  height: 20px;
  font-size: var(--step--1);
  color: var(--text-2);
  pointer-events: none;
  z-index: 2;
}

.search-box__icon--search {
  left: var(--space-s);
}

.search-box__icon--loading {
  right: var(--space-s);
  animation: pulse 1.5s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.search-box__input {
  width: 100%;
  padding: var(--space-s) var(--space-l) var(--space-s) calc(var(--space-s) + 32px);
  border: none;
  background: transparent;
  font-size: var(--step-0);
  font-family: inherit;
  color: var(--text-1);
  outline: none;
}

.search-box__input::placeholder {
  color: var(--text-2);
}

.search-box__input:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.search-box__clear {
  position: absolute;
  right: var(--space-s);
  display: flex;
  align-items: center;
  justify-content: center;
  width: 24px;
  height: 24px;
  border: none;
  background: var(--surface-2);
  color: var(--text-2);
  border-radius: var(--radius-2);
  font-size: var(--step--2);
  cursor: pointer;
  transition: all 0.2s ease;
  z-index: 2;
}

.search-box__clear:hover {
  background: var(--surface-3);
  color: var(--text-1);
  transform: scale(1.1);
}

.search-box__clear:focus {
  outline: 2px solid var(--brand-2);
  outline-offset: 2px;
}

.search-box__dropdown {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  z-index: 1000;
  background: var(--surface-1);
  border: 2px solid var(--border-1);
  border-top: none;
  border-radius: 0 0 var(--radius-3) var(--radius-3);
  box-shadow: 0 8px 32px oklch(25% 0.03 240 / 0.15);
  overflow: hidden;
  animation: slideDown 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

@keyframes slideDown {
  from {
    opacity: 0;
    transform: translateY(-4px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.search-box__dropdown-header {
  padding: var(--space-xs) var(--space-s);
  background: var(--surface-2);
  border-bottom: 1px solid var(--border-1);
}

.search-box__dropdown-title {
  font-size: var(--step--2);
  font-weight: 600;
  color: var(--text-2);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.search-box__history {
  list-style: none;
  margin: 0;
  padding: 0;
  max-height: 200px;
  overflow-y: auto;
}

.search-box__history-item {
  display: flex;
  align-items: center;
  width: 100%;
  padding: var(--space-xs) var(--space-s);
  border: none;
  background: transparent;
  color: var(--text-1);
  font-family: inherit;
  font-size: var(--step--1);
  text-align: left;
  cursor: pointer;
  transition: background-color 0.15s ease;
}

.search-box__history-item:hover,
.search-box__history-item--selected {
  background: var(--surface-2);
}

.search-box__history-item:focus {
  outline: none;
  background: var(--brand-1) / 0.1;
  color: var(--brand-2);
}

.search-box__history-icon {
  margin-right: var(--space-xs);
  font-size: var(--step--2);
  opacity: 0.7;
}

.search-box__history-text {
  flex: 1;
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

/* Mobile optimizations */
@media (max-width: 480px) {
  .search-box {
    max-width: 100%;
  }
  
  .search-box__input {
    font-size: 16px; /* Prevents zoom on iOS */
  }
  
  .search-box__dropdown {
    box-shadow: 0 4px 16px oklch(25% 0.03 240 / 0.2);
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .search-box__input-wrapper {
    border-width: 3px;
  }
  
  .search-box--focused .search-box__input-wrapper {
    outline: 3px solid var(--brand-2);
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  .search-box__input-wrapper,
  .search-box__clear,
  .search-box__history-item {
    transition: none;
  }
  
  .search-box__dropdown {
    animation: none;
  }
  
  .search-box__icon--loading {
    animation: none;
  }
}

/* === END SEARCH BOX COMPONENT === */

/* === SEARCH RESULTS COMPONENT === */
.search-results {
  width: 100%;
  margin-top: var(--space-m);
}

.search-results__stats {
  margin-bottom: var(--space-m);
  padding: var(--space-s) var(--space-m);
  background: var(--surface-2);
  border-radius: var(--radius-2);
  border-left: 4px solid var(--brand-2);
}

.search-results__stats-text {
  margin: 0;
  font-size: var(--step--1);
  color: var(--text-2);
}

/* Loading State */
.search-results--loading {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 200px;
}

.search-results__loading {
  text-align: center;
}

.search-results__loading-icon {
  font-size: var(--step-2);
  margin-bottom: var(--space-s);
  animation: searchPulse 1.5s ease-in-out infinite;
}

@keyframes searchPulse {
  0%, 100% { 
    opacity: 1; 
    transform: scale(1);
  }
  50% { 
    opacity: 0.6; 
    transform: scale(1.1);
  }
}

.search-results__loading-text {
  margin: 0;
  font-size: var(--step-0);
  color: var(--text-2);
}

/* Empty State */
.search-results--empty {
  display: flex;
  justify-content: center;
  align-items: center;
  min-height: 300px;
}

.search-results__empty {
  text-align: center;
  max-width: 400px;
}

.search-results__empty-icon {
  font-size: var(--step-3);
  margin-bottom: var(--space-m);
  opacity: 0.6;
}

.search-results__empty-title {
  margin: 0 0 var(--space-s) 0;
  font-size: var(--step-1);
  font-weight: 600;
  color: var(--text-1);
}

.search-results__empty-description {
  margin: 0 0 var(--space-m) 0;
  font-size: var(--step--1);
  color: var(--text-2);
  line-height: 1.5;
}

.search-results__query-info {
  padding: var(--space-xs) var(--space-s);
  background: var(--surface-2);
  border-radius: var(--radius-2);
  font-size: var(--step--2);
  color: var(--text-2);
}

/* Results List */
.search-results__list {
  display: flex;
  flex-direction: column;
  gap: var(--space-m);
}

/* Individual Search Result */
.search-result {
  background: var(--surface-1);
  border: 2px solid var(--border-1);
  border-radius: var(--radius-3);
  padding: var(--space-m);
  cursor: pointer;
  transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 0 2px 8px oklch(25% 0.03 240 / 0.08);
}

.search-result:hover {
  border-color: var(--brand-2);
  box-shadow: 
    0 0 0 3px var(--brand-2) / 0.1,
    0 8px 24px oklch(25% 0.03 240 / 0.12);
  transform: translateY(-2px);
}

.search-result:focus {
  outline: none;
  border-color: var(--brand-2);
  box-shadow: 
    0 0 0 3px var(--brand-2) / 0.2,
    0 8px 24px oklch(25% 0.03 240 / 0.12);
}

/* Difficulty-based styling */
.search-result--easy {
  border-left: 4px solid oklch(70% 0.15 150);
}

.search-result--medium {
  border-left: 4px solid oklch(65% 0.18 45);
}

.search-result--hard {
  border-left: 4px solid oklch(60% 0.22 10);
}

/* Search Result Header */
.search-result__header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: var(--space-s);
}

.search-result__meta {
  display: flex;
  align-items: center;
  gap: var(--space-s);
  flex-wrap: wrap;
}

.search-result__difficulty {
  padding: var(--space-3xs) var(--space-2xs);
  border-radius: var(--radius-pill);
  font-size: var(--step--2);
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: white;
}

.difficulty--easy {
  background: oklch(70% 0.15 150);
}

.difficulty--medium {
  background: oklch(65% 0.18 45);
}

.difficulty--hard {
  background: oklch(60% 0.22 10);
}

.search-result__category {
  padding: var(--space-3xs) var(--space-xs);
  background: var(--surface-2);
  border-radius: var(--radius-2);
  font-size: var(--step--2);
  font-weight: 500;
  color: var(--text-2);
}

.search-result__score {
  padding: var(--space-3xs) var(--space-xs);
  background: var(--brand-1) / 0.1;
  color: var(--brand-2);
  border-radius: var(--radius-2);
  font-size: var(--step--2);
  font-weight: 600;
}

.search-result__study-btn {
  padding: var(--space-xs) var(--space-s);
  background: var(--brand-2);
  color: white;
  border: none;
  border-radius: var(--radius-2);
  font-size: var(--step--2);
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s ease;
  white-space: nowrap;
}

.search-result__study-btn:hover {
  background: var(--brand-3);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px var(--brand-2) / 0.3;
}

.search-result__study-btn:focus {
  outline: 2px solid var(--brand-2);
  outline-offset: 2px;
}

/* Search Result Content */
.search-result__content {
  margin-bottom: var(--space-s);
}

.search-result__question,
.search-result__answer {
  margin-bottom: var(--space-s);
}

.search-result__question:last-child,
.search-result__answer:last-child {
  margin-bottom: 0;
}

.search-result__label {
  display: inline-block;
  margin-bottom: var(--space-3xs);
  font-size: var(--step--2);
  font-weight: 600;
  color: var(--text-2);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.search-result__text {
  font-size: var(--step--1);
  line-height: 1.5;
  color: var(--text-1);
}

/* Search Result Footer */
.search-result__footer {
  border-top: 1px solid var(--border-1);
  padding-top: var(--space-s);
}

.search-result__tags {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-2xs);
}

.search-result__tag {
  padding: var(--space-3xs) var(--space-xs);
  background: var(--surface-2);
  border-radius: var(--radius-pill);
  font-size: var(--step--2);
  color: var(--text-2);
  white-space: nowrap;
}

.search-result__tag--more {
  background: var(--surface-3);
  font-weight: 600;
}

/* Search Highlighting */
.search-highlight {
  background: linear-gradient(120deg, oklch(85% 0.1 60) 0%, oklch(90% 0.08 50) 100%);
  color: oklch(25% 0.02 60);
  padding: 0 var(--space-3xs);
  border-radius: var(--radius-1);
  font-weight: 600;
  box-decoration-break: clone;
  -webkit-box-decoration-break: clone;
}

/* Load More */
.search-results__load-more {
  margin-top: var(--space-l);
  text-align: center;
}

.search-results__load-more-btn {
  padding: var(--space-s) var(--space-l);
  background: var(--surface-2);
  border: 2px solid var(--border-1);
  border-radius: var(--radius-3);
  color: var(--text-1);
  font-size: var(--step--1);
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.search-results__load-more-btn:hover {
  background: var(--surface-3);
  border-color: var(--brand-2);
  transform: translateY(-1px);
  box-shadow: 0 4px 12px oklch(25% 0.03 240 / 0.1);
}

.search-results__load-more-btn:focus {
  outline: 2px solid var(--brand-2);
  outline-offset: 2px;
}

/* Mobile Optimizations */
@media (max-width: 640px) {
  .search-result {
    padding: var(--space-s);
  }
  
  .search-result__header {
    flex-direction: column;
    gap: var(--space-s);
    align-items: flex-start;
  }
  
  .search-result__meta {
    flex-wrap: wrap;
  }
  
  .search-result__study-btn {
    align-self: flex-start;
  }
  
  .search-result__tags {
    gap: var(--space-3xs);
  }
  
  .search-highlight {
    padding: 0 1px;
  }
}

/* High Contrast Mode */
@media (prefers-contrast: high) {
  .search-result {
    border-width: 3px;
  }
  
  .search-highlight {
    background: yellow;
    color: black;
    outline: 2px solid black;
  }
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {
  .search-result,
  .search-result__study-btn,
  .search-results__load-more-btn {
    transition: none;
  }
  
  .search-result:hover {
    transform: none;
  }
  
  .search-results__loading-icon {
    animation: none;
  }
}

/* === END SEARCH RESULTS COMPONENT === */

/* === SEARCH PAGE COMPONENT === */
.search-page {
  max-width: 1200px;
  margin: 0 auto;
  padding: var(--space-l);
}

.search-page__header {
  text-align: center;
  margin-bottom: var(--space-xl);
}

.search-page__title {
  margin: 0 0 var(--space-s) 0;
  font-size: var(--step-3);
  font-weight: 700;
  color: var(--text-1);
  background: linear-gradient(135deg, var(--brand-2), var(--brand-3));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.search-page__description {
  margin: 0;
  font-size: var(--step-0);
  color: var(--text-2);
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
  line-height: 1.6;
}

.search-page__input {
  margin-bottom: var(--space-l);
}

.search-page__filters {
  margin-bottom: var(--space-l);
}

.search-filters {
  background: var(--surface-1);
  border: 2px solid var(--border-1);
  border-radius: var(--radius-3);
  padding: var(--space-m);
}

.search-filters__title {
  margin: 0 0 var(--space-s) 0;
  font-size: var(--step-0);
  font-weight: 600;
  color: var(--text-1);
}

.search-filters__group {
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
  margin-bottom: var(--space-s);
}

.search-filters__group:last-of-type {
  margin-bottom: var(--space-s);
}

.search-filters__label {
  font-size: var(--step--1);
  font-weight: 500;
  color: var(--text-2);
}

.search-filters__select {
  padding: var(--space-xs) var(--space-s);
  border: 2px solid var(--border-1);
  border-radius: var(--radius-2);
  background: var(--surface-1);
  color: var(--text-1);
  font-size: var(--step--1);
  font-family: inherit;
  cursor: pointer;
  transition: border-color 0.2s ease;
}

.search-filters__select:focus {
  outline: none;
  border-color: var(--brand-2);
  box-shadow: 0 0 0 3px var(--brand-2) / 0.1;
}

.search-filters__clear {
  padding: var(--space-xs) var(--space-s);
  background: var(--surface-2);
  border: 1px solid var(--border-1);
  border-radius: var(--radius-2);
  color: var(--text-2);
  font-size: var(--step--2);
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
  align-self: flex-start;
}

.search-filters__clear:hover {
  background: var(--surface-3);
  color: var(--text-1);
}

.search-filters__clear:focus {
  outline: 2px solid var(--brand-2);
  outline-offset: 2px;
}

.search-page__results {
  margin-bottom: var(--space-xl);
}

/* Search Tips */
.search-page__tips {
  margin-top: var(--space-xl);
}

.search-tips {
  background: linear-gradient(135deg, var(--surface-1), var(--surface-2));
  border: 2px solid var(--border-1);
  border-radius: var(--radius-xl);
  padding: var(--space-l);
}

.search-tips__title {
  margin: 0 0 var(--space-m) 0;
  font-size: var(--step-1);
  font-weight: 600;
  color: var(--text-1);
  text-align: center;
}

.search-tips__grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: var(--space-m);
}

.search-tip {
  background: var(--surface-1);
  border: 1px solid var(--border-1);
  border-radius: var(--radius-3);
  padding: var(--space-m);
}

.search-tip strong {
  display: block;
  margin-bottom: var(--space-xs);
  font-size: var(--step--1);
  font-weight: 600;
  color: var(--brand-2);
}

.search-tip p {
  margin: 0;
  font-size: var(--step--2);
  color: var(--text-2);
  line-height: 1.4;
}

/* Mobile Optimization */
@media (max-width: 768px) {
  .search-page {
    padding: var(--space-m);
  }
  
  .search-page__title {
    font-size: var(--step-2);
  }
  
  .search-filters {
    padding: var(--space-s);
  }
  
  .search-tips__grid {
    grid-template-columns: 1fr;
    gap: var(--space-s);
  }
  
  .search-tip {
    padding: var(--space-s);
  }
}

@media (max-width: 480px) {
  .search-filters__group {
    gap: var(--space-2xs);
  }
  
  .search-filters__select {
    padding: var(--space-2xs) var(--space-xs);
  }
}

/* Dark Mode Optimizations */
@media (prefers-color-scheme: dark) {
  .search-page__title {
    background: linear-gradient(135deg, oklch(70% 0.15 240), oklch(75% 0.12 260));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  
  .search-tips {
    background: linear-gradient(135deg, var(--surface-2), var(--surface-3));
  }
}

/* === END SEARCH PAGE COMPONENT === */

/* === NAVIGATION SEARCH ENHANCEMENT === */
.nav-search {
  position: relative;
  display: flex;
  align-items: center;
}

.search-toggle {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border: none;
  background: var(--surface-2);
  color: var(--text-2);
  border-radius: var(--radius-2);
  cursor: pointer;
  transition: all 0.2s ease;
  font-size: 16px;
}

.search-toggle:hover {
  background: var(--surface-3);
  color: var(--text-1);
  transform: scale(1.05);
}

.search-toggle:focus {
  outline: 2px solid var(--brand-2);
  outline-offset: 2px;
}

.nav-search--open .search-toggle {
  background: var(--brand-2);
  color: white;
}

/* Search Dropdown */
.search-dropdown {
  position: absolute;
  top: 100%;
  right: 0;
  width: 400px;
  background: var(--surface-1);
  border: 2px solid var(--border-1);
  border-radius: var(--radius-3);
  box-shadow: 
    0 8px 32px oklch(25% 0.03 240 / 0.15),
    0 0 0 1px var(--brand-2) / 0.1;
  z-index: 1000;
  margin-top: var(--space-xs);
  animation: slideDown 0.2s cubic-bezier(0.4, 0, 0.2, 1);
}

.search-input-container {
  position: relative;
  padding: var(--space-s);
}

.search-input {
  width: 100%;
  padding: var(--space-s) var(--space-l) var(--space-s) var(--space-s);
  border: 1px solid var(--border-1);
  border-radius: var(--radius-2);
  background: var(--surface-1);
  color: var(--text-1);
  font-size: var(--step--1);
  font-family: inherit;
  outline: none;
  transition: border-color 0.2s var(--ease-out-2);
}

.search-input:focus {
  border-color: var(--brand-primary);
  box-shadow: 0 0 0 3px oklch(from var(--brand-primary) l c h / 0.1);
}

.search-input::placeholder {
  color: var(--text-2);
}

.search-clear {
  position: absolute;
  right: calc(var(--space-s) + var(--space-xs));
  top: 50%;
  transform: translateY(-50%);
  width: 24px;
  height: 24px;
  border: none;
  background: var(--surface-2);
  color: var(--text-2);
  border-radius: var(--radius-1);
  cursor: pointer;
  font-size: var(--step--2);
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s var(--ease-out-2);
}

.search-clear:hover {
  background: var(--surface-3);
  color: var(--text-1);
  transform: translateY(-50%) scale(1.05);
}

.search-loading {
  position: absolute;
  right: calc(var(--space-s) + var(--space-xs));
  top: 50%;
  transform: translateY(-50%);
  color: var(--text-2);
  animation: pulse 1.5s ease-in-out infinite;
}

/* Search Results in Dropdown */
.search-results-dropdown {
  border-top: 1px solid var(--border-1);
  max-height: 400px;
  overflow-y: auto;
}

.search-results-header {
  padding: var(--space-xs) var(--space-s);
  background: var(--surface-2);
  border-bottom: 1px solid var(--border-1);
}

.search-results-count {
  font-size: var(--step--2);
  font-weight: 600;
  color: var(--text-2);
}

.search-results-list {
  max-height: 300px;
  overflow-y: auto;
}

.search-result-item {
  display: flex;
  align-items: center;
  padding: var(--space-s);
  border-bottom: 1px solid var(--border-1);
  cursor: pointer;
  transition: background-color 0.15s ease;
}

.search-result-item:hover {
  background: var(--surface-2);
}

.search-result-item:last-child {
  border-bottom: none;
}

.search-result-content {
  flex: 1;
  min-width: 0; /* Allow shrinking */
}

.search-result-question {
  font-size: var(--step--1);
  font-weight: 500;
  color: var(--text-1);
  margin-bottom: var(--space-2xs);
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.search-result-meta {
  display: flex;
  align-items: center;
  gap: var(--space-xs);
  flex-wrap: wrap;
}

.search-result-difficulty {
  padding: var(--space-3xs) var(--space-2xs);
  border-radius: var(--radius-pill);
  font-size: var(--step--3);
  font-weight: 700;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  color: white;
}

.search-result-category {
  padding: var(--space-3xs) var(--space-xs);
  background: var(--surface-3);
  border-radius: var(--radius-1);
  font-size: var(--step--3);
  color: var(--text-2);
}

.search-result-score {
  padding: var(--space-3xs) var(--space-xs);
  background: var(--brand-1) / 0.1;
  color: var(--brand-2);
  border-radius: var(--radius-1);
  font-size: var(--step--3);
  font-weight: 600;
}

.search-result-study {
  margin-left: var(--space-s);
  width: 32px;
  height: 32px;
  border: none;
  background: var(--brand-2);
  color: white;
  border-radius: var(--radius-2);
  cursor: pointer;
  font-size: 14px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s ease;
  flex-shrink: 0;
}

.search-result-study:hover {
  background: var(--brand-3);
  transform: scale(1.1);
}

.search-results-footer {
  padding: var(--space-s);
  border-top: 1px solid var(--border-1);
  background: var(--surface-2);
}

.search-view-all {
  width: 100%;
  padding: var(--space-xs) var(--space-s);
  border: 1px solid var(--border-1);
  background: var(--surface-1);
  color: var(--brand-2);
  border-radius: var(--radius-2);
  font-size: var(--step--2);
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.search-view-all:hover {
  background: var(--brand-1) / 0.1;
  border-color: var(--brand-2);
}

/* No Results State */
.search-no-results {
  padding: var(--space-l);
  text-align: center;
}

.search-no-results-icon {
  font-size: var(--step-1);
  margin-bottom: var(--space-s);
  opacity: 0.6;
}

.search-no-results-text {
  font-size: var(--step--1);
  color: var(--text-2);
}

/* Search History */
.search-history {
  padding: var(--space-s);
}

.search-history-header {
  font-size: var(--step--2);
  font-weight: 600;
  color: var(--text-2);
  margin-bottom: var(--space-xs);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.search-history-list {
  display: flex;
  flex-direction: column;
  gap: var(--space-2xs);
}

.search-history-item {
  display: flex;
  align-items: center;
  padding: var(--space-xs) var(--space-s);
  border: none;
  background: transparent;
  color: var(--text-2);
  font-size: var(--step--2);
  text-align: left;
  cursor: pointer;
  border-radius: var(--radius-2);
  transition: all 0.15s ease;
}

.search-history-item:hover {
  background: var(--surface-2);
  color: var(--text-1);
}

/* Mobile Adaptations */
@media (max-width: 768px) {
  .search-dropdown {
    width: 320px;
    right: -10px;
  }
}

@media (max-width: 480px) {
  .search-dropdown {
    width: 280px;
    right: -20px;
  }
  
  .search-result-meta {
    gap: var(--space-2xs);
  }
  
  .search-result-study {
    width: 28px;
    height: 28px;
    font-size: 12px;
  }
}

/* High Contrast Support */
@media (prefers-contrast: high) {
  .search-dropdown {
    border-width: 3px;
  }
  
  .search-input {
    border-width: 3px;
  }
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {
  .search-dropdown {
    animation: none;
  }
  
  .search-toggle,
  .search-clear,
  .search-result-study {
    transition: none;
  }
  
  .search-toggle:hover,
  .search-clear:hover,
  .search-result-study:hover {
    transform: none;
  }
}

/* === END NAVIGATION SEARCH ENHANCEMENT === */

/* === DASHBOARD SEARCH HERO SECTION === */

.search-hero {
  background: var(--surface-1);
  border: 1px solid var(--border-1);
  border-radius: var(--radius-xl);
  padding: var(--space-xl);
  margin-bottom: var(--space-xl);
  position: relative;
  transition: all 0.2s var(--ease-out-2);
  box-shadow: var(--shadow-1);
}

.search-hero::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--brand-primary);
  opacity: 0;
  border-radius: var(--radius-xl);
  transition: opacity 0.2s var(--ease-out-2);
  pointer-events: none;
}

.search-hero:hover::before {
  opacity: 0.02;
}

.search-hero:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-3);
  border-color: var(--brand-primary);
}

.search-hero__header {
  text-align: center;
  margin-bottom: var(--space-l);
}

.search-hero__title {
  margin: 0 0 var(--space-s) 0;
  font-size: var(--step-2);
  font-weight: 700;
  color: var(--text-1);
}

.search-hero__subtitle {
  margin: 0;
  font-size: var(--step--1);
  color: var(--text-3);
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
  line-height: 1.5;
}

.search-hero__input {
  margin-bottom: var(--space-l);
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
  position: relative;
}

.search-input--hero {
  font-size: var(--step-0);
  padding: var(--space-m) var(--space-l);
  border: 1px solid var(--border-1);
  border-radius: var(--radius-3);
  background: var(--surface-1);
  color: var(--text-1);
  outline: none;
  transition: all 0.2s var(--ease-out-2);
  box-shadow: var(--shadow-1);
}

.search-input--hero:focus {
  border-color: var(--brand-primary);
  box-shadow: 
    0 0 0 3px oklch(from var(--brand-primary) l c h / 0.1),
    var(--shadow-2);
}

.search-input--hero::placeholder {
  color: var(--text-2);
  font-style: italic;
}

/* Search Results Grid */
.search-hero__results {
  position: absolute;
  top: 100%;
  left: 0;
  right: 0;
  z-index: 1000;
  background: var(--surface-1);
  border: 1px solid var(--border-1);
  border-radius: var(--radius-3);
  box-shadow: var(--shadow-xl);
  max-height: 70vh;
  overflow-y: auto;
  margin-top: var(--space-xs);
  animation: slideDown 0.2s var(--ease-out-2);
}

.search-results-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: var(--space-s);
  padding: var(--space-m);
}

.search-result-card {
  background: var(--surface-1);
  border: 1px solid var(--border-1);
  border-radius: var(--radius-3);
  padding: var(--space-m);
  cursor: pointer;
  transition: all 0.2s var(--ease-out-2);
  box-shadow: var(--shadow-1);
  display: flex;
  flex-direction: column;
  gap: var(--space-s);
  position: relative;
  overflow: hidden;
}

.search-result-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-3);
  border-color: var(--brand-primary);
}

.search-result-card::before {
  content: '';
  position: absolute;
  inset: 0;
  background: var(--brand-primary);
  opacity: 0;
  border-radius: var(--radius-3);
  transition: opacity 0.2s var(--ease-out-2);
  pointer-events: none;
}

.search-result-card:hover::before {
  opacity: 0.02;
}

.search-result-content {
  flex: 1;
  display: flex;
  flex-direction: column;
  gap: var(--space-xs);
}

.search-result-question {
  font-size: var(--step--1);
  font-weight: 600;
  color: var(--text-1);
  line-height: 1.4;
  margin-bottom: var(--space-xs);
}

.search-result-answer {
  font-size: var(--step--2);
  color: var(--text-2);
  line-height: 1.4;
  margin-bottom: var(--space-s);
}

.search-result-actions {
  display: flex;
  align-items: center;
  justify-content: flex-end;
  margin-top: auto;
}

.search-result-study {
  width: 36px;
  height: 36px;
  border: none;
  background: var(--brand-primary);
  color: white;
  border-radius: var(--radius-2);
  cursor: pointer;
  font-size: 16px;
  display: flex;
  align-items: center;
  justify-content: center;
  transition: all 0.2s var(--ease-out-2);
  box-shadow: var(--shadow-1);
}

.search-result-study:hover {
  background: var(--brand-600);
  transform: translateY(-1px);
  box-shadow: var(--shadow-2);
}

/* Search Results Header */
.search-results-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: var(--space-m) var(--space-m) var(--space-s) var(--space-m);
  border-bottom: 1px solid var(--border-1);
  background: var(--surface-2);
  border-radius: var(--radius-3) var(--radius-3) 0 0;
}

.search-results-count {
  font-size: var(--step--1);
  font-weight: 600;
  color: var(--text-2);
}

.search-view-all-link {
  background: none;
  border: none;
  color: var(--brand-primary);
  font-size: var(--step--2);
  font-weight: 600;
  cursor: pointer;
  text-decoration: underline;
  text-underline-offset: 2px;
  transition: all 0.2s var(--ease-out-2);
}

.search-view-all-link:hover {
  color: var(--brand-600);
  text-decoration-thickness: 2px;
}

/* No Results State */
.search-no-results {
  text-align: center;
  padding: var(--space-xl);
}

.search-no-results-icon {
  font-size: var(--step-2);
  margin-bottom: var(--space-s);
  opacity: 0.6;
}

.search-no-results-text {
  font-size: var(--step-0);
  font-weight: 600;
  color: var(--text-1);
  margin-bottom: var(--space-xs);
}

.search-no-results-suggestion {
  font-size: var(--step--1);
  color: var(--text-2);
  margin: 0;
  line-height: 1.5;
}

/* Search History */
.search-history {
  padding: var(--space-m);
}

.search-history-header {
  font-size: var(--step--1);
  font-weight: 600;
  color: var(--text-2);
  margin-bottom: var(--space-s);
  text-transform: uppercase;
  letter-spacing: 0.05em;
}

.search-history-list {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-xs);
}

.search-history-item {
  padding: var(--space-xs) var(--space-s);
  background: var(--surface-1);
  border: 1px solid var(--border-1);
  border-radius: var(--radius-pill);
  color: var(--text-2);
  font-size: var(--step--2);
  cursor: pointer;
  transition: all 0.2s ease;
  white-space: nowrap;
}

.search-history-item:hover {
  background: var(--brand-50);
  border-color: var(--brand-primary);
  color: var(--brand-700);
  transform: translateY(-1px);
}

/* Search Tips */
.search-tips {
  padding: var(--space-m);
}

.search-tips-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: var(--space-s);
}

.search-tip {
  display: flex;
  align-items: flex-start;
  gap: var(--space-xs);
  background: var(--surface-2);
  padding: var(--space-s);
  border-radius: var(--radius-2);
  border: 1px solid var(--border-1);
}

.search-tip-icon {
  font-size: var(--step-0);
  flex-shrink: 0;
  margin-top: 2px;
}

.search-tip div {
  flex: 1;
}

.search-tip strong {
  display: block;
  font-size: var(--step--1);
  font-weight: 600;
  color: var(--text-1);
  margin-bottom: var(--space-2xs);
}

.search-tip p {
  font-size: var(--step--2);
  color: var(--text-2);
  margin: 0;
  line-height: 1.4;
}

/* Mobile Optimizations */
@media (max-width: 768px) {
  .search-hero {
    padding: var(--space-l);
    margin-bottom: var(--space-l);
  }
  
  .search-hero__title {
    font-size: var(--step-1);
  }
  
  .search-hero__results {
    max-height: 60vh;
    left: -var(--space-s);
    right: -var(--space-s);
  }
  
  .search-results-grid {
    grid-template-columns: 1fr;
    gap: var(--space-s);
    padding: var(--space-s);
  }
  
  .search-result-card {
    padding: var(--space-s);
  }
  
  .search-tips-grid {
    grid-template-columns: 1fr;
    gap: var(--space-xs);
  }
  
  .search-tip {
    padding: var(--space-xs);
  }
}

@media (max-width: 480px) {
  .search-hero {
    padding: var(--space-m);
  }
  
  .search-hero__input {
    margin-bottom: var(--space-m);
  }
  
  .search-hero__results {
    max-height: 50vh;
    left: -var(--space-m);
    right: -var(--space-m);
  }
  
  .search-input--hero {
    font-size: 16px; /* Prevents zoom on iOS */
    padding: var(--space-s) var(--space-m);
  }
  
  .search-results-header {
    flex-direction: column;
    align-items: flex-start;
    gap: var(--space-xs);
    padding: var(--space-s);
  }
  
  .search-results-grid {
    padding: var(--space-xs);
  }
  
  .search-history-list {
    flex-direction: column;
    align-items: flex-start;
  }
  
  .search-history-item {
    align-self: stretch;
    text-align: left;
  }
}

/* High Contrast Mode */
@media (prefers-contrast: high) {
  .search-hero {
    border-width: 3px;
  }
  
  .search-input--hero {
    border-width: 3px;
  }
  
  .search-result-card {
    border-width: 3px;
  }
}

/* Reduced Motion */
@media (prefers-reduced-motion: reduce) {
  .search-hero,
  .search-result-card,
  .search-result-study,
  .search-history-item {
    transition: none;
  }
  
  .search-result-card:hover,
  .search-result-study:hover,
  .search-history-item:hover {
    transform: none;
  }
}

/* === END DASHBOARD SEARCH HERO SECTION === */
/* === THEME-AWARE COMPONENT CLASSES === */
.theme-primary {
  background: var(--theme-accent-gradient);
  color: var(--text-inverse);
  border: 1px solid var(--theme-accent);
}

.theme-secondary {
  background: var(--theme-secondary-gradient);
  color: var(--text-inverse);
  border: 1px solid var(--theme-secondary);
}

.theme-glass {
  background: var(--gradient-glass-1);
  backdrop-filter: var(--blur-md);
  -webkit-backdrop-filter: var(--blur-md);
  border: 1px solid var(--glass-2);
}

.theme-accent-border {
  border-color: var(--theme-accent);
}

.theme-accent-glow {
  box-shadow: 
    var(--shadow-lg),
    0 0 20px var(--theme-accent) / 0.3;
}

/* === SMOOTH THEME TRANSITIONS === */
:root {
  --theme-transition: background-color var(--duration-md) var(--ease-out-2),
                      border-color var(--duration-md) var(--ease-out-2),
                      color var(--duration-md) var(--ease-out-2),
                      box-shadow var(--duration-md) var(--ease-out-2),
                      backdrop-filter var(--duration-md) var(--ease-out-2);
}

/* Apply theme transitions to major components */
.deck-card,
.flashcard__front,
.flashcard__back,
.btn-primary,
.btn-secondary,
.navigation,
.stat-card,
.action-card {
  transition: var(--theme-transition);
}

/* === BRAIN BULB SVG THEME SUPPORT === */
/* Default: Dark SVG for light mode */
.logo-svg,
.nav-logo,
.hero-logo {
  filter: none;
  transition: filter var(--duration-md) var(--ease-out-2);
}

/* Dark mode: Invert to white */
[data-theme='dark'] .logo-svg,
[data-theme='dark'] .nav-logo,
[data-theme='dark'] .hero-logo,
.dark-theme .logo-svg,
.dark-theme .nav-logo,
.dark-theme .hero-logo {
  filter: invert(1) brightness(1);
}

/* Auto mode: Beautiful gradient effect using hue-rotate and saturation */
@media (prefers-color-scheme: dark) {
  .logo-svg.auto-mode,
  .nav-logo.auto-mode,
  .hero-logo.auto-mode {
    filter: invert(1) hue-rotate(45deg) saturate(1.5) brightness(1.1);
    animation: logoGlow 4s ease-in-out infinite alternate;
  }
}

@media (prefers-color-scheme: light) {
  .logo-svg.auto-mode,
  .nav-logo.auto-mode,
  .hero-logo.auto-mode {
    filter: hue-rotate(45deg) saturate(1.5) brightness(0.9);
    animation: logoGlow 4s ease-in-out infinite alternate;
  }
}

/* Light mode specific: Gradient effect */
[data-theme='light'] .logo-svg.light-mode,
[data-theme='light'] .nav-logo.light-mode,
[data-theme='light'] .hero-logo.light-mode,
.light-theme .logo-svg.light-mode,
.light-theme .nav-logo.light-mode,
.light-theme .hero-logo.light-mode {
  filter: hue-rotate(45deg) saturate(1.2) contrast(1.1);
}

/* Dark mode specific: Gradient effect */
[data-theme='dark'] .logo-svg.dark-mode,
[data-theme='dark'] .nav-logo.dark-mode,
[data-theme='dark'] .hero-logo.dark-mode,
.dark-theme .logo-svg.dark-mode,
.dark-theme .nav-logo.dark-mode,
.dark-theme .hero-logo.dark-mode {
  filter: invert(1) hue-rotate(200deg) saturate(1.3) brightness(1.1);
}

/* Magical glow animation for auto mode */
@keyframes logoGlow {
  0% {
    filter: hue-rotate(0deg) saturate(1.2) brightness(1);
  }
  25% {
    filter: hue-rotate(90deg) saturate(1.5) brightness(1.1);
  }
  50% {
    filter: hue-rotate(180deg) saturate(1.8) brightness(1.2);
  }
  75% {
    filter: hue-rotate(270deg) saturate(1.5) brightness(1.1);
  }
  100% {
    filter: hue-rotate(360deg) saturate(1.2) brightness(1);
  }
}

/* Dark mode version of the glow animation */
[data-theme='dark'] .logo-svg.auto-mode,
[data-theme='dark'] .nav-logo.auto-mode,
[data-theme='dark'] .hero-logo.auto-mode {
  animation: logoGlowDark 4s ease-in-out infinite alternate;
}

@keyframes logoGlowDark {
  0% {
    filter: invert(1) hue-rotate(0deg) saturate(1.2) brightness(1.1);
  }
  25% {
    filter: invert(1) hue-rotate(90deg) saturate(1.5) brightness(1.2);
  }
  50% {
    filter: invert(1) hue-rotate(180deg) saturate(1.8) brightness(1.3);
  }
  75% {
    filter: invert(1) hue-rotate(270deg) saturate(1.5) brightness(1.2);
  }
  100% {
    filter: invert(1) hue-rotate(360deg) saturate(1.2) brightness(1.1);
  }
}

/* Reduce motion for users who prefer it */
@media (prefers-reduced-motion: reduce) {
  .logo-svg.auto-mode,
  .nav-logo.auto-mode,
  .hero-logo.auto-mode {
    animation: none;
    filter: hue-rotate(45deg) saturate(1.3);
  }
  
  [data-theme='dark'] .logo-svg.auto-mode,
  [data-theme='dark'] .nav-logo.auto-mode,
  [data-theme='dark'] .hero-logo.auto-mode {
    animation: none;
    filter: invert(1) hue-rotate(45deg) saturate(1.3) brightness(1.1);
  }
}

/* === GUEST USER STYLING === */
.guest-user {
  position: relative;
  opacity: 0.8;
}

.guest-user .user-icon {
  color: var(--text-2);
}

.guest-strike {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 1.2em;
  color: oklch(60% 0.25 25); /* Red color */
  text-shadow: 0 0 3px oklch(60% 0.25 25 / 0.5);
  pointer-events: none;
  z-index: 1;
}

.guest-info .user-name {
  color: var(--text-2);
  font-style: italic;
}

.guest-info .user-email {
  color: var(--text-3);
  font-size: 0.85em;
}

.login-button {
  display: flex;
  align-items: center;
  gap: var(--space-2xs);
  padding: var(--space-xs) var(--space-sm);
  background: var(--brand-gradient);
  color: white;
  text-decoration: none;
  border-radius: var(--radius-md);
  font-weight: 500;
  transition: all var(--duration-sm) var(--ease-out-2);
  border: 1px solid var(--brand-500);
}

.login-button:hover {
  background: var(--brand-700);
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}

.login-button:active {
  transform: translateY(0);
}

/* Mobile guest user styling */
.user-avatar-mobile.guest-user {
  position: relative;
  opacity: 0.8;
}

.user-avatar-mobile.guest-user .user-icon {
  color: var(--text-2);
}

.user-avatar-mobile .guest-strike {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-size: 1.1em;
  color: oklch(60% 0.25 25); /* Red color */
  text-shadow: 0 0 3px oklch(60% 0.25 25 / 0.5);
  pointer-events: none;
  z-index: 1;
}
